<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Pukar Bhandari">
<meta name="dcterms.date" content="2025-10-14">
<meta name="description" content="This notebook replicates the analysis from the ’_archive/_Source - Med Income &amp; Value of Time - 2022-08-09.xlsb’ using the Utah Household and Hosehold Income data from 2019-2023 American Community Survey 5-Year Estimates. The VOTs are segmented by occupancy and purpose (work vs.&nbsp;personal).">

<title>Value of Time Estimation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script><script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="index_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="index_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-dark-707d8167ce6003fca903bfe2be84ab7f.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap-0b716d6fe31096b8dc5b1cb48462c79f.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="index_files/libs/bootstrap/bootstrap-dark-7c823468029c3b379f9b90e418026680.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="index_files/libs/bootstrap/bootstrap-0b716d6fe31096b8dc5b1cb48462c79f.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js" integrity="sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const queryPrefersDark = window.matchMedia('(prefers-color-scheme: dark)');
    const darkModeDefault = queryPrefersDark.matches;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    queryPrefersDark.addEventListener("change", e => {
      if(window.localStorage.getItem("quarto-color-scheme") !== null)
        return;
      const alternate = e.matches
      toggleColorMode(alternate);
      localAlternateSentinel = e.matches ? 'alternate' : 'default'; // this is used alongside local storage!
      toggleGiscusIfUsed(alternate, darkModeDefault);
    });
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <div class="quarto-title-block"><div><h1 class="title">Value of Time Estimation</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
            <p class="subtitle lead">Estimating the Value of Time (VOT) Parameter for Utah’s Travel Demand Model</p>
                  <div>
        <div class="description">
          This notebook replicates the analysis from the ’_archive/_Source - Med Income &amp; Value of Time - 2022-08-09.xlsb’ using the Utah Household and Hosehold Income data from 2019-2023 American Community Survey 5-Year Estimates. The VOTs are segmented by occupancy and purpose (work vs.&nbsp;personal).
        </div>
      </div>
                </div>
  </div>
    
  <div class="quarto-title-meta-author">
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-heading">Affiliation</div>
    
      <div class="quarto-title-meta-contents">
      <p class="author">Pukar Bhandari <a href="mailto:pukar.bhandari@wfrc.utah.gov" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> </p>
    </div>
    <div class="quarto-title-meta-contents">
          <p class="affiliation">
              <a href="https://wfrc.utah.gov/">
              Wasatch Front Regional Council
              </a>
            </p>
        </div>
    </div>

  <div class="quarto-title-meta">

        
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">October 14, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a></li>
  <li><a href="#environment-setup" id="toc-environment-setup" class="nav-link" data-scroll-target="#environment-setup"><span class="header-section-number">2</span> Environment Setup</a>
  <ul class="collapse">
  <li><a href="#install-required-packages" id="toc-install-required-packages" class="nav-link" data-scroll-target="#install-required-packages">Install Required Packages</a></li>
  <li><a href="#load-libraries" id="toc-load-libraries" class="nav-link" data-scroll-target="#load-libraries">Load Libraries</a></li>
  <li><a href="#environment-variables" id="toc-environment-variables" class="nav-link" data-scroll-target="#environment-variables">Environment Variables</a></li>
  </ul></li>
  <li><a href="#define-helper-functions" id="toc-define-helper-functions" class="nav-link" data-scroll-target="#define-helper-functions"><span class="header-section-number">3</span> Define Helper Functions</a>
  <ul class="collapse">
  <li><a href="#fetch-excel-files-from-bls-or-bts" id="toc-fetch-excel-files-from-bls-or-bts" class="nav-link" data-scroll-target="#fetch-excel-files-from-bls-or-bts">Fetch Excel Files from BLS or BTS</a></li>
  </ul></li>
  <li><a href="#lookup-tables" id="toc-lookup-tables" class="nav-link" data-scroll-target="#lookup-tables"><span class="header-section-number">4</span> Lookup Tables</a>
  <ul class="collapse">
  <li><a href="#income-category-lookup" id="toc-income-category-lookup" class="nav-link" data-scroll-target="#income-category-lookup">Income Category Lookup</a></li>
  </ul></li>
  <li><a href="#raw-data-sources" id="toc-raw-data-sources" class="nav-link" data-scroll-target="#raw-data-sources"><span class="header-section-number">5</span> Raw Data Sources</a>
  <ul class="collapse">
  <li><a href="#consumer-price-index" id="toc-consumer-price-index" class="nav-link" data-scroll-target="#consumer-price-index">Consumer Price Index</a></li>
  <li><a href="#american-community-survey-acs-5-year-estimates" id="toc-american-community-survey-acs-5-year-estimates" class="nav-link" data-scroll-target="#american-community-survey-acs-5-year-estimates">American Community Survey (ACS) 5-Year Estimates</a></li>
  </ul></li>
  <li><a href="#intermediate-calculations" id="toc-intermediate-calculations" class="nav-link" data-scroll-target="#intermediate-calculations"><span class="header-section-number">6</span> Intermediate Calculations</a>
  <ul class="collapse">
  <li><a href="#income-groupings-approximate-income-quartiles" id="toc-income-groupings-approximate-income-quartiles" class="nav-link" data-scroll-target="#income-groupings-approximate-income-quartiles">Income Groupings (Approximate Income Quartiles)</a></li>
  <li><a href="#median-income-in-model-base-year-dollars" id="toc-median-income-in-model-base-year-dollars" class="nav-link" data-scroll-target="#median-income-in-model-base-year-dollars">Median Income (in Model Base Year Dollars)</a></li>
  <li><a href="#value-of-time-in-model-base-year-dollars" id="toc-value-of-time-in-model-base-year-dollars" class="nav-link" data-scroll-target="#value-of-time-in-model-base-year-dollars">Value of Time (in Model Base Year Dollars)</a></li>
  </ul></li>
  <li><a href="#export-results" id="toc-export-results" class="nav-link" data-scroll-target="#export-results"><span class="header-section-number">7</span> Export Results</a>
  <ul class="collapse">
  <li><a href="#create-final-vot-table" id="toc-create-final-vot-table" class="nav-link" data-scroll-target="#create-final-vot-table">Create Final VOT Table</a></li>
  <li><a href="#export-to-csv" id="toc-export-to-csv" class="nav-link" data-scroll-target="#export-to-csv">Export to CSV</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">






<section id="introduction" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">1</span> Introduction</h2>
<p>This analysis estimates the Value of Time (VOT) parameters for Utah’s travel demand model using income data from the American Community Survey (ACS) 2019-2023 5-Year Estimates. The VOT represents how much travelers value their time, expressed in cents per minute, and is a critical parameter for evaluating transportation projects and predicting mode choice behavior.</p>
<p>The methodology segments travelers by income level (low, average, and high) and trip purpose (work vs.&nbsp;personal trips), recognizing that different travelers value their time differently. Work trips typically have higher VOT since travel time directly impacts productivity, while personal trips reflect individuals’ willingness to trade time for money in their leisure activities.</p>
<p>This notebook replicates and updates the methodology from the archived Excel workbook, providing a transparent, reproducible workflow using open source data science tools.</p>
</section>
<section id="environment-setup" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="environment-setup"><span class="header-section-number">2</span> Environment Setup</h2>
<section id="install-required-packages" class="level3">
<h3 class="anchored" data-anchor-id="install-required-packages">Install Required Packages</h3>
<p>This section prepares the computing environment by loading necessary Python libraries and configuring project-specific settings. We use pandas and numpy for data manipulation, geopandas for spatial operations, and pygris for seamless access to Census data. The visualization libraries (matplotlib and seaborn) will help us understand income distributions and validate our calculations.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>conda install <span class="op">-</span>c conda<span class="op">-</span>forge numpy pandas geopandas matplotlib seaborn python<span class="op">-</span>dotenv openpyxl</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install pygris</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="load-libraries" class="level3">
<h3 class="anchored" data-anchor-id="load-libraries">Load Libraries</h3>
<p>Import all required libraries for the analysis. The pygris library enables direct access to Census Bureau geographic data and ACS estimates through their API.</p>
<div id="1e7db88e" class="cell" data-execution_count="1">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># For Analysis</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> warnings</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co"># For Visualization</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.dates <span class="im">as</span> mdates</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.ticker <span class="im">as</span> ticker</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> adjustText <span class="im">import</span> adjust_text</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Census data query libraries &amp; modules</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pygris <span class="im">import</span> blocks, block_groups, counties, states</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pygris.helpers <span class="im">import</span> validate_state, validate_county</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pygris.data <span class="im">import</span> get_census</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="co"># misc</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> datetime</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> dotenv <span class="im">import</span> load_dotenv</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>load_dotenv()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>False</code></pre>
</div>
</div>
</section>
<section id="environment-variables" class="level3">
<h3 class="anchored" data-anchor-id="environment-variables">Environment Variables</h3>
<p>We establish Utah-specific geographic parameters for the analysis. The NAD83 / UTM zone 12N coordinate reference system (EPSG:3566) is the standard projection for Utah, providing accurate distance measurements for spatial analysis. The state FIPS code (49) uniquely identifies Utah in federal datasets.</p>
<div id="6f704818" class="cell" data-execution_count="2">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>PROJECT_CRS <span class="op">=</span> <span class="st">"EPSG:3566"</span>  <span class="co"># NAD83 / UTM zone 12N</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>STATE_FIPS <span class="op">=</span> validate_state(<span class="st">"UT"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Using FIPS code '49' for input 'UT'</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Need a Census API key?</strong> Get one for free at <a href="https://api.census.gov/data/key_signup.html">census.gov/developers</a>.</p>
<p>Create a <code>.env</code> file in the project directory and add your Census API key: <code>CENSUS_API_KEY=your-key-here</code> This enables fetching US Census data from the Census API.</p>
</div>
</div>
<div id="6e7b7e9f" class="cell" data-execution_count="3">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set your API key into environment (alternative to .env file)</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>os.environ[<span class="st">'CENSUS_API_KEY'</span>] <span class="op">=</span> <span class="st">'your_api_key_here'</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
</section>
<section id="define-helper-functions" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="define-helper-functions"><span class="header-section-number">3</span> Define Helper Functions</h2>
<p>To maintain code reusability and follow DRY (Don’t Repeat Yourself) principles, we define helper functions for common operations throughout the analysis.</p>
<section id="fetch-excel-files-from-bls-or-bts" class="level3">
<h3 class="anchored" data-anchor-id="fetch-excel-files-from-bls-or-bts">Fetch Excel Files from BLS or BTS</h3>
<p>This utility function automates downloading data files from federal agencies. It checks if a file already exists locally before attempting to download, avoiding unnecessary network requests and respecting the agencies’ servers. The function includes proper HTTP headers to ensure reliable downloads.</p>
<div id="30b846fc" class="cell" data-execution_count="4">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fetch_excel(path, url):</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Download Excel file if it doesn't exist locally.</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters:</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co">    -----------</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co">    path : str or Path</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co">        Local file path to save the Excel file</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co">    url : str</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co">        URL to download the Excel file from</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert to Path object if string</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>    filepath <span class="op">=</span> Path(path)</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Download file if it doesn't exist</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> filepath.exists():</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>        filepath.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>        headers <span class="op">=</span> {</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>            <span class="st">'User-Agent'</span>: <span class="st">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>        response <span class="op">=</span> requests.get(url, headers<span class="op">=</span>headers)</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>        filepath.write_bytes(response.content)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
</section>
<section id="lookup-tables" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="lookup-tables"><span class="header-section-number">4</span> Lookup Tables</h2>
<p>Lookup tables serve as reference datasets that map categories to values. These tables ensure consistency across calculations and make the code more maintainable by centralizing key parameter definitions.</p>
<section id="income-category-lookup" class="level3">
<h3 class="anchored" data-anchor-id="income-category-lookup">Income Category Lookup</h3>
<p>The ACS reports household income in 16 predefined brackets rather than individual values. To perform calculations with this grouped data, we need to estimate representative income values for each bracket. This lookup table defines the boundaries of each income bracket and calculates midpoint values.</p>
<p>For the highest income bracket ($200,000+), which has no upper limit, we use $300,000 as a reasonable midpoint. This value is based on research showing that high-income distributions typically concentrate between $200,000 and $400,000, with $300,000 representing a conservative central estimate.Create a reference table defining the income brackets used in ACS Table B19001. Each bracket has a lower and upper limit, and we calculate midpoints for median estimation. The highest bracket ($200,000+) uses $300,000 as a reasonable midpoint based on income distribution patterns.</p>
<div id="24a2666c" class="cell" data-execution_count="5">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>lookup_hhinc <span class="op">=</span> pd.DataFrame({</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Income Category"</span>: [</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"HH_LT_10K"</span>, <span class="st">"HH_10_15K"</span>, <span class="st">"HH_15_20K"</span>, <span class="st">"HH_20_25K"</span>, <span class="st">"HH_25_30K"</span>, <span class="st">"HH_30_35K"</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"HH_35_40K"</span>, <span class="st">"HH_40_45K"</span>, <span class="st">"HH_45_50K"</span>, <span class="st">"HH_50_60K"</span>, <span class="st">"HH_60_75K"</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"HH_75_100K"</span>, <span class="st">"HH_100_125K"</span>, <span class="st">"HH_125_150K"</span>, <span class="st">"HH_150_200K"</span>, <span class="st">"HH_GT_200K"</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  ],</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Lower Limit"</span>: [</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="dv">0</span>, <span class="dv">10000</span>, <span class="dv">15000</span>, <span class="dv">20000</span>, <span class="dv">25000</span>, <span class="dv">30000</span>,</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="dv">35000</span>, <span class="dv">40000</span>, <span class="dv">45000</span>, <span class="dv">50000</span>, <span class="dv">60000</span>,</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="dv">75000</span>, <span class="dv">100000</span>, <span class="dv">125000</span>, <span class="dv">150000</span>, <span class="dv">200000</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  ],</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Upper Limit"</span>: [</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    <span class="dv">9999</span>, <span class="dv">14999</span>, <span class="dv">19999</span>, <span class="dv">24999</span>, <span class="dv">29999</span>, <span class="dv">34999</span>,</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    <span class="dv">39999</span>, <span class="dv">44999</span>, <span class="dv">49999</span>, <span class="dv">59999</span>, <span class="dv">74999</span>,</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    <span class="dv">99999</span>, <span class="dv">124999</span>, <span class="dv">149999</span>, <span class="dv">199999</span>, np.inf</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute midpoint and round it</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>lookup_hhinc[<span class="st">'Midpoint'</span>] <span class="op">=</span> (</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>  (lookup_hhinc[<span class="st">'Lower Limit'</span>] <span class="op">+</span> lookup_hhinc[<span class="st">'Upper Limit'</span>]) <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>).<span class="bu">round</span>()</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace infinite midpoint (last category) with 300000</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>lookup_hhinc.loc[np.isinf(lookup_hhinc[<span class="st">"Upper Limit"</span>]), <span class="st">"Midpoint"</span>] <span class="op">=</span> <span class="dv">300000</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>lookup_hhinc</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="4">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Income Category</th>
<th data-quarto-table-cell-role="th">Lower Limit</th>
<th data-quarto-table-cell-role="th">Upper Limit</th>
<th data-quarto-table-cell-role="th">Midpoint</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>HH_LT_10K</td>
<td>0</td>
<td>9999.0</td>
<td>5000.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>HH_10_15K</td>
<td>10000</td>
<td>14999.0</td>
<td>12500.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>HH_15_20K</td>
<td>15000</td>
<td>19999.0</td>
<td>17500.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>HH_20_25K</td>
<td>20000</td>
<td>24999.0</td>
<td>22500.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>HH_25_30K</td>
<td>25000</td>
<td>29999.0</td>
<td>27500.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">5</th>
<td>HH_30_35K</td>
<td>30000</td>
<td>34999.0</td>
<td>32500.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">6</th>
<td>HH_35_40K</td>
<td>35000</td>
<td>39999.0</td>
<td>37500.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">7</th>
<td>HH_40_45K</td>
<td>40000</td>
<td>44999.0</td>
<td>42500.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">8</th>
<td>HH_45_50K</td>
<td>45000</td>
<td>49999.0</td>
<td>47500.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">9</th>
<td>HH_50_60K</td>
<td>50000</td>
<td>59999.0</td>
<td>55000.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">10</th>
<td>HH_60_75K</td>
<td>60000</td>
<td>74999.0</td>
<td>67500.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">11</th>
<td>HH_75_100K</td>
<td>75000</td>
<td>99999.0</td>
<td>87500.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">12</th>
<td>HH_100_125K</td>
<td>100000</td>
<td>124999.0</td>
<td>112500.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">13</th>
<td>HH_125_150K</td>
<td>125000</td>
<td>149999.0</td>
<td>137500.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">14</th>
<td>HH_150_200K</td>
<td>150000</td>
<td>199999.0</td>
<td>175000.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">15</th>
<td>HH_GT_200K</td>
<td>200000</td>
<td>inf</td>
<td>300000.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
</section>
<section id="raw-data-sources" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="raw-data-sources"><span class="header-section-number">5</span> Raw Data Sources</h2>
<p>This section retrieves the foundational datasets needed for VOT estimation. We access data directly from authoritative federal sources to ensure accuracy and reproducibility.</p>
<section id="consumer-price-index" class="level3">
<h3 class="anchored" data-anchor-id="consumer-price-index">Consumer Price Index</h3>
<p>The CPI-U-RS (Consumer Price Index for All Urban Consumers - Research Series) provides the most consistent measure of inflation over time. While we use current-year dollars in this analysis, having CPI data available enables future inflation adjustments and facilitates comparisons with historical VOT estimates. The research series is specifically designed for longitudinal analysis, maintaining methodological consistency that the standard CPI-U lacks.</p>
<p>Data Source: Consumer Price Index for All Urban Consumers (CPI-U) [Source: <a href="https://www.bls.gov/cpi/research-series/r-cpi-u-rs-home.htm">Bureau of Labor Statistics</a>]</p>
<div id="4ce6d7e7" class="cell" data-execution_count="6">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Usage</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>filepath_cpi <span class="op">=</span> Path(<span class="st">"_data/bls/r-cpi-u-rs-allitems.xlsx"</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>url_cpi <span class="op">=</span> <span class="st">"https://www.bls.gov/cpi/research-series/r-cpi-u-rs-allitems.xlsx"</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Download if needed</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>fetch_excel(path<span class="op">=</span>filepath_cpi, url<span class="op">=</span>url_cpi)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Read separately</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>df_CPI <span class="op">=</span> pd.read_excel(</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    filepath_cpi,</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    sheet_name<span class="op">=</span><span class="st">"All items"</span>,</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    usecols<span class="op">=</span><span class="st">"A:N"</span>,</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>    skiprows<span class="op">=</span><span class="dv">5</span>,</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    engine<span class="op">=</span><span class="st">'openpyxl'</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>df_CPI</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="5">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">YEAR</th>
<th data-quarto-table-cell-role="th">JAN</th>
<th data-quarto-table-cell-role="th">FEB</th>
<th data-quarto-table-cell-role="th">MAR</th>
<th data-quarto-table-cell-role="th">APR</th>
<th data-quarto-table-cell-role="th">MAY</th>
<th data-quarto-table-cell-role="th">JUNE</th>
<th data-quarto-table-cell-role="th">JULY</th>
<th data-quarto-table-cell-role="th">AUG</th>
<th data-quarto-table-cell-role="th">SEP</th>
<th data-quarto-table-cell-role="th">OCT</th>
<th data-quarto-table-cell-role="th">NOV</th>
<th data-quarto-table-cell-role="th">DEC</th>
<th data-quarto-table-cell-role="th">AVG</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>1977</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>100.0</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>1978</td>
<td>100.5</td>
<td>101.1</td>
<td>101.8</td>
<td>102.7</td>
<td>103.6</td>
<td>104.5</td>
<td>105.0</td>
<td>105.5</td>
<td>106.1</td>
<td>106.7</td>
<td>107.3</td>
<td>107.8</td>
<td>104.4</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>1979</td>
<td>108.7</td>
<td>109.7</td>
<td>110.7</td>
<td>111.8</td>
<td>113.0</td>
<td>114.1</td>
<td>115.1</td>
<td>116.0</td>
<td>117.1</td>
<td>117.9</td>
<td>118.5</td>
<td>119.5</td>
<td>114.3</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>1980</td>
<td>120.8</td>
<td>122.4</td>
<td>123.8</td>
<td>124.7</td>
<td>125.7</td>
<td>126.7</td>
<td>127.5</td>
<td>128.6</td>
<td>129.9</td>
<td>130.7</td>
<td>131.5</td>
<td>132.4</td>
<td>127.1</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>1981</td>
<td>133.6</td>
<td>135.2</td>
<td>136.3</td>
<td>137.1</td>
<td>137.9</td>
<td>138.7</td>
<td>139.7</td>
<td>140.7</td>
<td>141.8</td>
<td>142.4</td>
<td>142.9</td>
<td>143.4</td>
<td>139.1</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">5</th>
<td>1982</td>
<td>144.2</td>
<td>144.7</td>
<td>144.9</td>
<td>145.0</td>
<td>146.1</td>
<td>147.5</td>
<td>148.5</td>
<td>148.8</td>
<td>149.5</td>
<td>150.2</td>
<td>150.5</td>
<td>150.6</td>
<td>147.5</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">6</th>
<td>1983</td>
<td>151.0</td>
<td>151.1</td>
<td>151.2</td>
<td>152.4</td>
<td>153.2</td>
<td>153.7</td>
<td>154.3</td>
<td>154.8</td>
<td>155.6</td>
<td>156.0</td>
<td>156.1</td>
<td>156.3</td>
<td>153.8</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">7</th>
<td>1984</td>
<td>157.2</td>
<td>158.0</td>
<td>158.3</td>
<td>159.0</td>
<td>159.5</td>
<td>159.9</td>
<td>160.4</td>
<td>161.1</td>
<td>161.8</td>
<td>162.2</td>
<td>162.2</td>
<td>162.3</td>
<td>160.2</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">8</th>
<td>1985</td>
<td>162.5</td>
<td>163.2</td>
<td>163.9</td>
<td>164.6</td>
<td>165.2</td>
<td>165.6</td>
<td>165.9</td>
<td>166.2</td>
<td>166.8</td>
<td>167.2</td>
<td>167.7</td>
<td>168.1</td>
<td>165.6</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">9</th>
<td>1986</td>
<td>168.6</td>
<td>168.1</td>
<td>167.3</td>
<td>166.9</td>
<td>167.4</td>
<td>168.2</td>
<td>168.2</td>
<td>168.5</td>
<td>169.4</td>
<td>169.5</td>
<td>169.5</td>
<td>169.6</td>
<td>168.4</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">10</th>
<td>1987</td>
<td>170.6</td>
<td>171.3</td>
<td>172.0</td>
<td>172.9</td>
<td>173.4</td>
<td>174.0</td>
<td>174.3</td>
<td>175.3</td>
<td>176.1</td>
<td>176.5</td>
<td>176.6</td>
<td>176.5</td>
<td>174.1</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">11</th>
<td>1988</td>
<td>177.0</td>
<td>177.3</td>
<td>178.0</td>
<td>178.9</td>
<td>179.5</td>
<td>180.1</td>
<td>180.8</td>
<td>181.6</td>
<td>182.7</td>
<td>183.2</td>
<td>183.3</td>
<td>183.4</td>
<td>180.5</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">12</th>
<td>1989</td>
<td>184.3</td>
<td>184.9</td>
<td>185.9</td>
<td>187.2</td>
<td>188.1</td>
<td>188.5</td>
<td>189.0</td>
<td>189.2</td>
<td>189.8</td>
<td>190.6</td>
<td>190.9</td>
<td>191.1</td>
<td>188.3</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">13</th>
<td>1990</td>
<td>193.0</td>
<td>193.9</td>
<td>194.9</td>
<td>195.2</td>
<td>195.5</td>
<td>196.5</td>
<td>197.3</td>
<td>199.0</td>
<td>200.6</td>
<td>201.7</td>
<td>202.0</td>
<td>202.0</td>
<td>197.6</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">14</th>
<td>1991</td>
<td>202.9</td>
<td>203.1</td>
<td>203.3</td>
<td>203.5</td>
<td>204.1</td>
<td>204.5</td>
<td>204.7</td>
<td>205.2</td>
<td>206.1</td>
<td>206.2</td>
<td>206.7</td>
<td>206.8</td>
<td>204.8</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">15</th>
<td>1992</td>
<td>207.2</td>
<td>207.7</td>
<td>208.6</td>
<td>209.0</td>
<td>209.3</td>
<td>209.7</td>
<td>210.1</td>
<td>210.6</td>
<td>211.2</td>
<td>211.8</td>
<td>212.1</td>
<td>211.9</td>
<td>209.9</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">16</th>
<td>1993</td>
<td>212.6</td>
<td>213.3</td>
<td>214.0</td>
<td>214.5</td>
<td>215.0</td>
<td>215.2</td>
<td>215.3</td>
<td>215.7</td>
<td>216.0</td>
<td>216.7</td>
<td>216.9</td>
<td>216.7</td>
<td>215.2</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">17</th>
<td>1994</td>
<td>217.1</td>
<td>217.6</td>
<td>218.4</td>
<td>218.6</td>
<td>218.9</td>
<td>219.5</td>
<td>220.0</td>
<td>220.7</td>
<td>221.1</td>
<td>221.2</td>
<td>221.5</td>
<td>221.4</td>
<td>219.7</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">18</th>
<td>1995</td>
<td>222.2</td>
<td>222.9</td>
<td>223.6</td>
<td>224.3</td>
<td>224.7</td>
<td>225.2</td>
<td>225.3</td>
<td>225.7</td>
<td>226.1</td>
<td>226.7</td>
<td>226.5</td>
<td>226.4</td>
<td>225.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">19</th>
<td>1996</td>
<td>227.5</td>
<td>228.3</td>
<td>229.4</td>
<td>230.2</td>
<td>230.8</td>
<td>230.9</td>
<td>231.3</td>
<td>231.5</td>
<td>232.3</td>
<td>233.0</td>
<td>233.4</td>
<td>233.4</td>
<td>231.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">20</th>
<td>1997</td>
<td>234.1</td>
<td>234.7</td>
<td>235.2</td>
<td>235.5</td>
<td>235.4</td>
<td>235.8</td>
<td>235.9</td>
<td>236.3</td>
<td>237.1</td>
<td>237.5</td>
<td>237.4</td>
<td>237.0</td>
<td>236.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">21</th>
<td>1998</td>
<td>237.4</td>
<td>237.8</td>
<td>238.1</td>
<td>238.6</td>
<td>239.0</td>
<td>239.1</td>
<td>239.4</td>
<td>239.7</td>
<td>240.0</td>
<td>240.5</td>
<td>240.5</td>
<td>240.3</td>
<td>239.2</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">22</th>
<td>1999</td>
<td>240.9</td>
<td>241.2</td>
<td>241.9</td>
<td>243.6</td>
<td>243.6</td>
<td>243.7</td>
<td>244.4</td>
<td>245.1</td>
<td>246.2</td>
<td>246.7</td>
<td>246.8</td>
<td>246.8</td>
<td>244.2</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">23</th>
<td>2000</td>
<td>247.6</td>
<td>249.1</td>
<td>251.1</td>
<td>251.2</td>
<td>251.4</td>
<td>252.9</td>
<td>253.4</td>
<td>253.4</td>
<td>254.8</td>
<td>255.1</td>
<td>255.3</td>
<td>255.1</td>
<td>252.5</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">24</th>
<td>2001</td>
<td>256.8</td>
<td>257.9</td>
<td>258.5</td>
<td>259.5</td>
<td>260.5</td>
<td>261.1</td>
<td>260.3</td>
<td>260.4</td>
<td>261.4</td>
<td>260.6</td>
<td>260.1</td>
<td>259.1</td>
<td>259.7</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">25</th>
<td>2002</td>
<td>259.8</td>
<td>260.8</td>
<td>262.2</td>
<td>263.7</td>
<td>263.6</td>
<td>263.9</td>
<td>264.1</td>
<td>265.0</td>
<td>265.4</td>
<td>265.9</td>
<td>265.9</td>
<td>265.3</td>
<td>263.8</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">26</th>
<td>2003</td>
<td>266.4</td>
<td>268.6</td>
<td>270.2</td>
<td>269.5</td>
<td>269.1</td>
<td>269.5</td>
<td>269.7</td>
<td>270.7</td>
<td>271.6</td>
<td>271.4</td>
<td>270.6</td>
<td>270.3</td>
<td>269.8</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">27</th>
<td>2004</td>
<td>271.7</td>
<td>273.2</td>
<td>274.9</td>
<td>275.8</td>
<td>277.3</td>
<td>278.2</td>
<td>277.8</td>
<td>277.9</td>
<td>278.5</td>
<td>280.0</td>
<td>280.2</td>
<td>279.1</td>
<td>277.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">28</th>
<td>2005</td>
<td>279.6</td>
<td>281.3</td>
<td>283.5</td>
<td>285.4</td>
<td>285.2</td>
<td>285.2</td>
<td>286.5</td>
<td>288.0</td>
<td>291.5</td>
<td>292.2</td>
<td>289.8</td>
<td>288.6</td>
<td>286.4</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">29</th>
<td>2006</td>
<td>290.8</td>
<td>291.4</td>
<td>293.1</td>
<td>295.5</td>
<td>296.9</td>
<td>297.6</td>
<td>298.4</td>
<td>299.1</td>
<td>297.6</td>
<td>296.0</td>
<td>295.6</td>
<td>296.0</td>
<td>295.7</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">30</th>
<td>2007</td>
<td>296.9</td>
<td>298.5</td>
<td>301.2</td>
<td>303.1</td>
<td>305.0</td>
<td>305.6</td>
<td>305.5</td>
<td>304.9</td>
<td>305.8</td>
<td>306.4</td>
<td>308.3</td>
<td>308.1</td>
<td>304.1</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">31</th>
<td>2008</td>
<td>309.6</td>
<td>310.5</td>
<td>313.2</td>
<td>315.1</td>
<td>317.7</td>
<td>320.9</td>
<td>322.6</td>
<td>321.3</td>
<td>320.9</td>
<td>317.6</td>
<td>311.6</td>
<td>308.3</td>
<td>315.8</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">32</th>
<td>2009</td>
<td>309.7</td>
<td>311.2</td>
<td>312.0</td>
<td>312.8</td>
<td>313.7</td>
<td>316.4</td>
<td>315.8</td>
<td>316.6</td>
<td>316.8</td>
<td>317.1</td>
<td>317.3</td>
<td>316.7</td>
<td>314.7</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">33</th>
<td>2010</td>
<td>317.8</td>
<td>317.9</td>
<td>319.2</td>
<td>319.8</td>
<td>320.0</td>
<td>319.7</td>
<td>319.8</td>
<td>320.2</td>
<td>320.4</td>
<td>320.8</td>
<td>320.9</td>
<td>321.5</td>
<td>319.8</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">34</th>
<td>2011</td>
<td>323.0</td>
<td>324.6</td>
<td>327.8</td>
<td>329.9</td>
<td>331.5</td>
<td>331.1</td>
<td>331.4</td>
<td>332.3</td>
<td>332.8</td>
<td>332.2</td>
<td>331.9</td>
<td>331.1</td>
<td>330.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">35</th>
<td>2012</td>
<td>332.6</td>
<td>334.0</td>
<td>336.6</td>
<td>337.6</td>
<td>337.2</td>
<td>336.7</td>
<td>336.2</td>
<td>338.1</td>
<td>339.6</td>
<td>339.5</td>
<td>337.9</td>
<td>337.0</td>
<td>336.9</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">36</th>
<td>2013</td>
<td>338.0</td>
<td>340.8</td>
<td>341.7</td>
<td>341.3</td>
<td>341.9</td>
<td>342.8</td>
<td>342.9</td>
<td>343.3</td>
<td>343.8</td>
<td>342.9</td>
<td>342.2</td>
<td>342.2</td>
<td>342.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">37</th>
<td>2014</td>
<td>343.5</td>
<td>344.8</td>
<td>347.0</td>
<td>348.2</td>
<td>349.4</td>
<td>350.1</td>
<td>349.9</td>
<td>349.3</td>
<td>349.6</td>
<td>348.7</td>
<td>346.9</td>
<td>344.9</td>
<td>347.7</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">38</th>
<td>2015</td>
<td>343.4</td>
<td>344.9</td>
<td>346.9</td>
<td>347.7</td>
<td>349.4</td>
<td>350.7</td>
<td>350.7</td>
<td>350.2</td>
<td>349.7</td>
<td>349.5</td>
<td>348.8</td>
<td>347.6</td>
<td>348.3</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">39</th>
<td>2016</td>
<td>348.2</td>
<td>348.5</td>
<td>350.0</td>
<td>351.7</td>
<td>353.1</td>
<td>354.2</td>
<td>353.7</td>
<td>354.0</td>
<td>354.8</td>
<td>355.3</td>
<td>354.7</td>
<td>354.9</td>
<td>352.8</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">40</th>
<td>2017</td>
<td>356.9</td>
<td>358.0</td>
<td>358.3</td>
<td>359.4</td>
<td>359.7</td>
<td>360.0</td>
<td>359.8</td>
<td>360.9</td>
<td>362.8</td>
<td>362.5</td>
<td>362.6</td>
<td>362.3</td>
<td>360.3</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">41</th>
<td>2018</td>
<td>364.3</td>
<td>366.0</td>
<td>366.7</td>
<td>368.3</td>
<td>369.8</td>
<td>370.3</td>
<td>370.4</td>
<td>370.7</td>
<td>371.1</td>
<td>371.8</td>
<td>370.6</td>
<td>369.3</td>
<td>369.1</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">42</th>
<td>2019</td>
<td>370.0</td>
<td>371.5</td>
<td>373.6</td>
<td>375.6</td>
<td>376.4</td>
<td>376.5</td>
<td>377.2</td>
<td>377.1</td>
<td>377.5</td>
<td>378.4</td>
<td>378.2</td>
<td>377.8</td>
<td>375.8</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">43</th>
<td>2020</td>
<td>379.2</td>
<td>380.2</td>
<td>379.5</td>
<td>377.2</td>
<td>377.2</td>
<td>379.4</td>
<td>381.3</td>
<td>382.6</td>
<td>383.1</td>
<td>383.2</td>
<td>382.9</td>
<td>383.2</td>
<td>380.8</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">44</th>
<td>2021</td>
<td>384.9</td>
<td>387.1</td>
<td>390.0</td>
<td>393.2</td>
<td>396.7</td>
<td>400.5</td>
<td>402.4</td>
<td>403.1</td>
<td>404.2</td>
<td>407.6</td>
<td>409.5</td>
<td>410.8</td>
<td>399.2</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">45</th>
<td>2022</td>
<td>414.3</td>
<td>418.2</td>
<td>423.9</td>
<td>426.3</td>
<td>431.0</td>
<td>436.9</td>
<td>436.8</td>
<td>436.7</td>
<td>437.6</td>
<td>439.4</td>
<td>439.0</td>
<td>437.6</td>
<td>431.5</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">46</th>
<td>2023</td>
<td>441.1</td>
<td>443.6</td>
<td>445.0</td>
<td>447.3</td>
<td>448.4</td>
<td>449.9</td>
<td>450.7</td>
<td>452.7</td>
<td>453.8</td>
<td>453.6</td>
<td>452.7</td>
<td>452.3</td>
<td>449.3</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">47</th>
<td>2024</td>
<td>454.7</td>
<td>457.6</td>
<td>460.5</td>
<td>462.3</td>
<td>463.1</td>
<td>463.2</td>
<td>463.8</td>
<td>464.1</td>
<td>464.9</td>
<td>465.4</td>
<td>465.2</td>
<td>465.3</td>
<td>462.5</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p><strong>What we find:</strong> The CPI data shows the annual inflation rates that can be used to adjust income values across different time periods. For travel demand modeling, using inflation-adjusted dollars ensures that VOT parameters remain comparable over multi-year planning horizons.</p>
</section>
<section id="american-community-survey-acs-5-year-estimates" class="level3">
<h3 class="anchored" data-anchor-id="american-community-survey-acs-5-year-estimates">American Community Survey (ACS) 5-Year Estimates</h3>
<section id="define-census-variables" class="level4">
<h4 class="anchored" data-anchor-id="define-census-variables">Define Census Variables</h4>
<p>The ACS 5-Year Estimates provide the most reliable small-area income statistics available. Unlike the 1-Year estimates, which have large margins of error, the 5-year data aggregates five years of survey responses to produce stable estimates suitable for sub-state analysis. We extract data from two key tables:</p>
<ul>
<li><strong>Table B19013</strong>: Median household income (direct estimate)</li>
<li><strong>Table B19001</strong>: Household count by income bracket (distribution)</li>
</ul>
<p>The income brackets in B19001 align perfectly with our lookup table, allowing us to calculate weighted averages and validate the median income from B19013.</p>
<div id="ada34e25" class="cell" data-execution_count="7">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define variables to download</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>acs_variables <span class="op">=</span> {</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19013_001E'</span>: <span class="st">'HH_MED_INC'</span>,  <span class="co"># Median Household Income in the Past 12 Months (in 2023 Inflation-Adjusted Dollars)</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19013_001M'</span>: <span class="st">'HH_MED_INC_MOE'</span>,  <span class="co"># Margin of Error for Median Household Income</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19001_001E'</span>: <span class="st">'HH_TOTAL'</span>,  <span class="co"># Total Households</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19001_002E'</span>: <span class="st">'HH_LT_10K'</span>,  <span class="co"># Less than $10,000</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19001_003E'</span>: <span class="st">'HH_10_15K'</span>,  <span class="co"># $10,000 to $14,999</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19001_004E'</span>: <span class="st">'HH_15_20K'</span>,  <span class="co"># $15,000 to $19,999</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19001_005E'</span>: <span class="st">'HH_20_25K'</span>,  <span class="co"># $20,000 to $24,999</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19001_006E'</span>: <span class="st">'HH_25_30K'</span>,  <span class="co"># $25,000 to $29,999</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19001_007E'</span>: <span class="st">'HH_30_35K'</span>,  <span class="co"># $30,000 to $34,999</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19001_008E'</span>: <span class="st">'HH_35_40K'</span>,  <span class="co"># $35,000 to $39,999</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19001_009E'</span>: <span class="st">'HH_40_45K'</span>,  <span class="co"># $40,000 to $44,999</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19001_010E'</span>: <span class="st">'HH_45_50K'</span>,  <span class="co"># $45,000 to $49,999</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19001_011E'</span>: <span class="st">'HH_50_60K'</span>,  <span class="co"># $50,000 to $59,999</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19001_012E'</span>: <span class="st">'HH_60_75K'</span>,  <span class="co"># $60,000 to $74,999</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19001_013E'</span>: <span class="st">'HH_75_100K'</span>,  <span class="co"># $75,000 to $99,999</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19001_014E'</span>: <span class="st">'HH_100_125K'</span>,  <span class="co"># $100,000 to $124,999</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19001_015E'</span>: <span class="st">'HH_125_150K'</span>,  <span class="co"># $125,000 to $149,999</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19001_016E'</span>: <span class="st">'HH_150_200K'</span>,  <span class="co"># $150,000 to $199,999</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19001_017E'</span>: <span class="st">'HH_GT_200K'</span>  <span class="co"># $200,000 or more</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
<section id="state-level-data" class="level4">
<h4 class="anchored" data-anchor-id="state-level-data">State Level Data</h4>
<p>We begin with state-level data for Utah to establish baseline income statistics. While our final VOT parameters may use more granular geographic data in the future, state-level estimates provide a robust foundation with minimal sampling error. The large sample size at the state level ensures that our calculated VOT parameters are statistically reliable.</p>
<div id="629a66e9" class="cell" data-execution_count="8">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fetch state boundaries from TIGER/Line shapefiles</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>gdf_ut_bound <span class="op">=</span> states(</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  year<span class="op">=</span><span class="dv">2023</span>,</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  cache<span class="op">=</span><span class="va">True</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>).to_crs(PROJECT_CRS)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for Utah only</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>gdf_ut_bound <span class="op">=</span> gdf_ut_bound[gdf_ut_bound[<span class="st">'STATEFP'</span>] <span class="op">==</span> <span class="bu">str</span>(STATE_FIPS)]</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Fetch Income data from ACS 5-year estimates for Utah</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>df_ut_income <span class="op">=</span> get_census(</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>  dataset<span class="op">=</span><span class="st">"acs/acs5"</span>,</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>  year<span class="op">=</span><span class="dv">2023</span>,</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>  variables<span class="op">=</span><span class="bu">list</span>(acs_variables.keys()),</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>  params<span class="op">=</span>{</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>      <span class="co"># "key": f"{os.getenv('CENSUS_API_KEY')}", # </span><span class="al">FIXME</span><span class="co">: This causes error</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>      <span class="st">"for"</span>: <span class="ss">f"state:</span><span class="sc">{</span>STATE_FIPS<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>    return_geoid<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>    guess_dtypes<span class="op">=</span><span class="va">True</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Join ACS data to block group boundaries and transform CRS</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>gdf_ut_income <span class="op">=</span> gdf_ut_bound[[<span class="st">'GEOID'</span>, <span class="st">'STATEFP'</span>, <span class="st">'NAME'</span>, <span class="st">'geometry'</span>]].merge(</span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>    df_ut_income, on <span class="op">=</span> <span class="st">"GEOID"</span></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>).to_crs(PROJECT_CRS).rename(columns<span class="op">=</span>acs_variables)</span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview data</span></span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>gdf_ut_income</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="7">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">GEOID</th>
<th data-quarto-table-cell-role="th">STATEFP</th>
<th data-quarto-table-cell-role="th">NAME</th>
<th data-quarto-table-cell-role="th">geometry</th>
<th data-quarto-table-cell-role="th">HH_MED_INC</th>
<th data-quarto-table-cell-role="th">HH_MED_INC_MOE</th>
<th data-quarto-table-cell-role="th">HH_TOTAL</th>
<th data-quarto-table-cell-role="th">HH_LT_10K</th>
<th data-quarto-table-cell-role="th">HH_10_15K</th>
<th data-quarto-table-cell-role="th">HH_15_20K</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">HH_35_40K</th>
<th data-quarto-table-cell-role="th">HH_40_45K</th>
<th data-quarto-table-cell-role="th">HH_45_50K</th>
<th data-quarto-table-cell-role="th">HH_50_60K</th>
<th data-quarto-table-cell-role="th">HH_60_75K</th>
<th data-quarto-table-cell-role="th">HH_75_100K</th>
<th data-quarto-table-cell-role="th">HH_100_125K</th>
<th data-quarto-table-cell-role="th">HH_125_150K</th>
<th data-quarto-table-cell-role="th">HH_150_200K</th>
<th data-quarto-table-cell-role="th">HH_GT_200K</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>49</td>
<td>49</td>
<td>Utah</td>
<td>POLYGON ((900313.399 6302435.171, 900580.099 6...</td>
<td>91750</td>
<td>634</td>
<td>1094896</td>
<td>33918</td>
<td>22999</td>
<td>22352</td>
<td>...</td>
<td>33072</td>
<td>32113</td>
<td>35150</td>
<td>69627</td>
<td>104883</td>
<td>159368</td>
<td>134089</td>
<td>102926</td>
<td>124090</td>
<td>137560</td>
</tr>
</tbody>
</table>

<p>1 rows × 23 columns</p>
</div>
</div>
</div>
<p><strong>What we find:</strong> Utah’s median household income from the ACS provides the anchor point for all subsequent calculations. The distribution across income brackets shows the shape of Utah’s income distribution, which typically differs from national patterns due to the state’s unique demographic characteristics (larger household sizes, younger population, and specific economic structure).</p>
</section>
</section>
</section>
<section id="intermediate-calculations" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="intermediate-calculations"><span class="header-section-number">6</span> Intermediate Calculations</h2>
<p>With raw data in hand, we now perform the intermediate calculations needed to derive VOT parameters. These steps transform income distributions into the specific metrics required by the travel demand model.</p>
<section id="income-groupings-approximate-income-quartiles" class="level3">
<h3 class="anchored" data-anchor-id="income-groupings-approximate-income-quartiles">Income Groupings (Approximate Income Quartiles)</h3>
<p>Travel demand models often segment travelers by income level because income strongly influences mode choice, route selection, and willingness to pay for time savings. Rather than using 16 separate income categories (which would create excessive model complexity), we aggregate households into four income groups approximating quartiles.</p>
<p>The quartile approach ensures that each income group contains roughly 25% of households, providing balanced sample sizes for model estimation. However, because ACS income brackets don’t align perfectly with quartile boundaries, we assign entire brackets to the quartile they predominantly fall within.</p>
<p><strong>Income Group 1 (Low Income)</strong>: The first quartile of households by income. This group typically has the lowest VOT because they face tighter budget constraints and may be more willing to spend time to save money.</p>
<p><strong>Income Groups 2-4 (Higher Income)</strong>: The upper three quartiles, which we sometimes aggregate as “high income” in contrast to the lowest quartile. These households generally have higher VOT because their opportunity cost of time is greater.</p>
<div id="feb9589c" class="cell" data-execution_count="9">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a copy of lookup table to work with</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>df_inc_group <span class="op">=</span> lookup_hhinc.copy()</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the income category columns from gdf_ut_income</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract just the income bracket counts (excluding totals and medians)</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>income_cols <span class="op">=</span> [col <span class="cf">for</span> col <span class="kw">in</span> gdf_ut_income.columns <span class="cf">if</span> col.startswith(<span class="st">'HH_'</span>)</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>               <span class="kw">and</span> col <span class="kw">not</span> <span class="kw">in</span> [<span class="st">'HH_TOTAL'</span>, <span class="st">'HH_MED_INC'</span>, <span class="st">'HH_MED_INC_MOE'</span>]]</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a mapping between lookup categories and gdf_ut_income columns</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="co"># They should already match, but let's be explicit</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>df_inc_group[<span class="st">'State HH'</span>] <span class="op">=</span> df_inc_group[<span class="st">'Income Category'</span>].<span class="bu">map</span>(</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>    gdf_ut_income[income_cols].iloc[<span class="dv">0</span>].to_dict()</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate percentage of households</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>total_hh <span class="op">=</span> df_inc_group[<span class="st">'State HH'</span>].<span class="bu">sum</span>()</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>df_inc_group[<span class="st">'% HH'</span>] <span class="op">=</span> (df_inc_group[<span class="st">'State HH'</span>] <span class="op">/</span> total_hh <span class="op">*</span> <span class="dv">100</span>).<span class="bu">round</span>(<span class="dv">1</span>)</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate cumulative percentage</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>df_inc_group[<span class="st">'Cum % HH'</span>] <span class="op">=</span> df_inc_group[<span class="st">'% HH'</span>].cumsum().<span class="bu">round</span>(<span class="dv">1</span>)</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign income groups based on quartiles (25%, 50%, 75%, 100%)</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>df_inc_group[<span class="st">'Inc Group'</span>] <span class="op">=</span> pd.cut(</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>    df_inc_group[<span class="st">'Cum % HH'</span>],</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>    bins<span class="op">=</span>[<span class="dv">0</span>, <span class="dv">25</span>, <span class="dv">50</span>, <span class="dv">75</span>, <span class="dv">100</span>],</span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>    labels<span class="op">=</span>[<span class="st">'Inc Group 1'</span>, <span class="st">'Inc Group 2'</span>, <span class="st">'Inc Group 3'</span>, <span class="st">'Inc Group 4'</span>],</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>    include_lowest<span class="op">=</span><span class="va">True</span></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate HH_MedInc_Product (HH * Midpoint)</span></span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>df_inc_group[<span class="st">'HH_MedInc_Product'</span>] <span class="op">=</span> df_inc_group[<span class="st">'State HH'</span>] <span class="op">*</span> df_inc_group[<span class="st">'Midpoint'</span>]</span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the dataframe</span></span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>df_inc_group</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="8">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Income Category</th>
<th data-quarto-table-cell-role="th">Lower Limit</th>
<th data-quarto-table-cell-role="th">Upper Limit</th>
<th data-quarto-table-cell-role="th">Midpoint</th>
<th data-quarto-table-cell-role="th">State HH</th>
<th data-quarto-table-cell-role="th">% HH</th>
<th data-quarto-table-cell-role="th">Cum % HH</th>
<th data-quarto-table-cell-role="th">Inc Group</th>
<th data-quarto-table-cell-role="th">HH_MedInc_Product</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>HH_LT_10K</td>
<td>0</td>
<td>9999.0</td>
<td>5000.0</td>
<td>33918</td>
<td>3.1</td>
<td>3.1</td>
<td>Inc Group 1</td>
<td>1.695900e+08</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>HH_10_15K</td>
<td>10000</td>
<td>14999.0</td>
<td>12500.0</td>
<td>22999</td>
<td>2.1</td>
<td>5.2</td>
<td>Inc Group 1</td>
<td>2.874875e+08</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>HH_15_20K</td>
<td>15000</td>
<td>19999.0</td>
<td>17500.0</td>
<td>22352</td>
<td>2.0</td>
<td>7.2</td>
<td>Inc Group 1</td>
<td>3.911600e+08</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>HH_20_25K</td>
<td>20000</td>
<td>24999.0</td>
<td>22500.0</td>
<td>24376</td>
<td>2.2</td>
<td>9.4</td>
<td>Inc Group 1</td>
<td>5.484600e+08</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>HH_25_30K</td>
<td>25000</td>
<td>29999.0</td>
<td>27500.0</td>
<td>28040</td>
<td>2.6</td>
<td>12.0</td>
<td>Inc Group 1</td>
<td>7.711000e+08</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">5</th>
<td>HH_30_35K</td>
<td>30000</td>
<td>34999.0</td>
<td>32500.0</td>
<td>30333</td>
<td>2.8</td>
<td>14.8</td>
<td>Inc Group 1</td>
<td>9.858225e+08</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">6</th>
<td>HH_35_40K</td>
<td>35000</td>
<td>39999.0</td>
<td>37500.0</td>
<td>33072</td>
<td>3.0</td>
<td>17.8</td>
<td>Inc Group 1</td>
<td>1.240200e+09</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">7</th>
<td>HH_40_45K</td>
<td>40000</td>
<td>44999.0</td>
<td>42500.0</td>
<td>32113</td>
<td>2.9</td>
<td>20.7</td>
<td>Inc Group 1</td>
<td>1.364802e+09</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">8</th>
<td>HH_45_50K</td>
<td>45000</td>
<td>49999.0</td>
<td>47500.0</td>
<td>35150</td>
<td>3.2</td>
<td>23.9</td>
<td>Inc Group 1</td>
<td>1.669625e+09</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">9</th>
<td>HH_50_60K</td>
<td>50000</td>
<td>59999.0</td>
<td>55000.0</td>
<td>69627</td>
<td>6.4</td>
<td>30.3</td>
<td>Inc Group 2</td>
<td>3.829485e+09</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">10</th>
<td>HH_60_75K</td>
<td>60000</td>
<td>74999.0</td>
<td>67500.0</td>
<td>104883</td>
<td>9.6</td>
<td>39.9</td>
<td>Inc Group 2</td>
<td>7.079602e+09</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">11</th>
<td>HH_75_100K</td>
<td>75000</td>
<td>99999.0</td>
<td>87500.0</td>
<td>159368</td>
<td>14.6</td>
<td>54.5</td>
<td>Inc Group 3</td>
<td>1.394470e+10</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">12</th>
<td>HH_100_125K</td>
<td>100000</td>
<td>124999.0</td>
<td>112500.0</td>
<td>134089</td>
<td>12.2</td>
<td>66.7</td>
<td>Inc Group 3</td>
<td>1.508501e+10</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">13</th>
<td>HH_125_150K</td>
<td>125000</td>
<td>149999.0</td>
<td>137500.0</td>
<td>102926</td>
<td>9.4</td>
<td>76.1</td>
<td>Inc Group 4</td>
<td>1.415232e+10</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">14</th>
<td>HH_150_200K</td>
<td>150000</td>
<td>199999.0</td>
<td>175000.0</td>
<td>124090</td>
<td>11.3</td>
<td>87.4</td>
<td>Inc Group 4</td>
<td>2.171575e+10</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">15</th>
<td>HH_GT_200K</td>
<td>200000</td>
<td>inf</td>
<td>300000.0</td>
<td>137560</td>
<td>12.6</td>
<td>100.0</td>
<td>Inc Group 4</td>
<td>4.126800e+10</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="7376be45" class="cell" data-execution_count="10">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare data for seaborn</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>df_plot <span class="op">=</span> df_inc_group.copy()</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>df_plot[<span class="st">'Income Label'</span>] <span class="op">=</span> df_plot[<span class="st">'Income Category'</span>].<span class="bu">str</span>.replace(<span class="st">'HH_'</span>, <span class="st">''</span>).<span class="bu">str</span>.replace(<span class="st">'_'</span>, <span class="st">' - '</span>)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>df_plot[<span class="st">'index'</span>] <span class="op">=</span> <span class="bu">range</span>(<span class="bu">len</span>(df_plot))</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Define colors for each income group</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>palette <span class="op">=</span> {<span class="st">'Inc Group 1'</span>: <span class="st">'#3498db'</span>, <span class="st">'Inc Group 2'</span>: <span class="st">'#2ecc71'</span>,</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>           <span class="st">'Inc Group 3'</span>: <span class="st">'#f39c12'</span>, <span class="st">'Inc Group 4'</span>: <span class="st">'#e74c3c'</span>}</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seaborn style and context</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>sns.set_style(<span class="st">"whitegrid"</span>)</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>sns.set_context(<span class="st">"notebook"</span>)</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Create barplot using seaborn</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a><span class="co"># plt.figure(figsize=(12, 6))</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>sns.barplot(</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>    data<span class="op">=</span>df_plot,</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="st">'index'</span>,</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="st">'State HH'</span>,</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>    hue<span class="op">=</span><span class="st">'Inc Group'</span>,</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>    palette<span class="op">=</span>palette,</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>    legend<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>    dodge<span class="op">=</span><span class="va">False</span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize plot</span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Income Category'</span>, fontsize<span class="op">=</span><span class="dv">11</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Number of Households'</span>, fontsize<span class="op">=</span><span class="dv">11</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Utah Household Income Distribution by Quartile'</span>,</span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>          fontsize<span class="op">=</span><span class="dv">13</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>, pad<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Format y-axis with comma separator</span></span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>plt.gca().yaxis.set_major_formatter(ticker.FuncFormatter(<span class="kw">lambda</span> x, p: <span class="ss">f'</span><span class="sc">{</span>x<span class="sc">:,.0f}</span><span class="ss">'</span>))</span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Set x-axis labels</span></span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a>plt.xticks(<span class="bu">range</span>(<span class="bu">len</span>(df_plot)), df_plot[<span class="st">'Income Label'</span>],</span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a>           rotation<span class="op">=</span><span class="dv">45</span>, ha<span class="op">=</span><span class="st">'right'</span>, fontsize<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize legend</span></span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a>plt.legend(loc<span class="op">=</span><span class="st">'upper left'</span>, frameon<span class="op">=</span><span class="va">True</span>, fontsize<span class="op">=</span><span class="dv">10</span>, title<span class="op">=</span><span class="st">''</span>)</span>
<span id="cb13-41"><a href="#cb13-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-42"><a href="#cb13-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Grid styling</span></span>
<span id="cb13-43"><a href="#cb13-43" aria-hidden="true" tabindex="-1"></a>plt.grid(axis<span class="op">=</span><span class="st">'y'</span>, alpha<span class="op">=</span><span class="fl">0.3</span>, linestyle<span class="op">=</span><span class="st">'--'</span>)</span>
<span id="cb13-44"><a href="#cb13-44" aria-hidden="true" tabindex="-1"></a>plt.gca().set_axisbelow(<span class="va">True</span>)</span>
<span id="cb13-45"><a href="#cb13-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-46"><a href="#cb13-46" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove top and right spines for cleaner look</span></span>
<span id="cb13-47"><a href="#cb13-47" aria-hidden="true" tabindex="-1"></a>sns.despine()</span>
<span id="cb13-48"><a href="#cb13-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-49"><a href="#cb13-49" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb13-50"><a href="#cb13-50" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/cell-11-output-1.png" width="791" height="509" class="figure-img"></p>
<figcaption>Household Income Distribution by Quartile</figcaption>
</figure>
</div>
</div>
</div>
<p><strong>What we find:</strong> The visualization reveals Utah’s income distribution shape. We see a concentration of households in middle-income brackets with smaller tails at the lower extreme. This indicates a relatively strong middle class. The quartile assignments allow us to create a simplified four-group segmentation suitable for model implementation while preserving the essential income-based variation in time values.</p>
</section>
<section id="median-income-in-model-base-year-dollars" class="level3">
<h3 class="anchored" data-anchor-id="median-income-in-model-base-year-dollars">Median Income (in Model Base Year Dollars)</h3>
<p>To calculate VOT, we need a single representative income value for each income segment. The median is preferable to the mean because it’s less sensitive to extreme values and better represents the “typical” household in each group.</p>
<p>We calculate medians using two approaches:</p>
<ol type="1">
<li><strong>Weighted average of bracket midpoints</strong>: Using our lookup table midpoints and household counts</li>
<li><strong>ACS-reported median</strong>: The direct estimate from Table B19013</li>
</ol>
<p>The weighted average approach typically produces a value slightly different from the ACS median due to our simplified midpoint assumptions. We calculate a correction factor to align our estimates with the official ACS median for the full population, then apply this same correction proportionally to the income group medians. This ensures internal consistency while respecting the authoritative ACS estimates.</p>
<div id="36b5dd54" class="cell" data-execution_count="11">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define income categories</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>categories <span class="op">=</span> {</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Average'</span>: df_inc_group,</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Low Inc'</span>: df_inc_group[df_inc_group[<span class="st">'Inc Group'</span>] <span class="op">==</span> <span class="st">'Inc Group 1'</span>],</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'High Inc'</span>: df_inc_group[df_inc_group[<span class="st">'Inc Group'</span>] <span class="op">!=</span> <span class="st">'Inc Group 1'</span>]</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate metrics for each category</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>summary_data <span class="op">=</span> {}</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> cat_name, cat_df <span class="kw">in</span> categories.items():</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>    summary_data[cat_name] <span class="op">=</span> {</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Sum HH'</span>: cat_df[<span class="st">'State HH'</span>].<span class="bu">sum</span>(),</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Sum HH * Inc'</span>: cat_df[<span class="st">'HH_MedInc_Product'</span>].<span class="bu">sum</span>(),</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate unadjusted median income</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>    summary_data[cat_name][<span class="st">'Unadj Med Inc'</span>] <span class="op">=</span> (</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>        summary_data[cat_name][<span class="st">'Sum HH * Inc'</span>] <span class="op">/</span> summary_data[cat_name][<span class="st">'Sum HH'</span>]</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate correction factor from Average category</span></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>actual_median_income <span class="op">=</span> gdf_ut_income[<span class="st">'HH_MED_INC'</span>].iloc[<span class="dv">0</span>]</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>correction_factor <span class="op">=</span> actual_median_income <span class="op">/</span> summary_data[<span class="st">'Average'</span>][<span class="st">'Unadj Med Inc'</span>]</span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>inflation_factor <span class="op">=</span> <span class="fl">1.0</span></span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply correction and inflation factors</span></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> cat_name <span class="kw">in</span> summary_data:</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>    summary_data[cat_name][<span class="st">'Correction Factor'</span>] <span class="op">=</span> correction_factor</span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>    summary_data[cat_name][<span class="st">'Adj Med Income'</span>] <span class="op">=</span> (</span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>        summary_data[cat_name][<span class="st">'Unadj Med Inc'</span>] <span class="op">*</span> correction_factor</span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a>    summary_data[cat_name][<span class="st">'Inflation Adj Factor'</span>] <span class="op">=</span> inflation_factor</span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a>    summary_data[cat_name][<span class="st">'Median Income'</span>] <span class="op">=</span> (</span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a>        summary_data[cat_name][<span class="st">'Adj Med Income'</span>] <span class="op">*</span> inflation_factor</span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to DataFrame</span></span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a>df_summary <span class="op">=</span> pd.DataFrame(summary_data).T</span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Format for display</span></span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a>format_specs <span class="op">=</span> {</span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Sum HH'</span>: <span class="st">'</span><span class="sc">{:,.0f}</span><span class="st">'</span>,</span>
<span id="cb14-42"><a href="#cb14-42" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Sum HH * Inc'</span>: <span class="st">'</span><span class="sc">{:,.0f}</span><span class="st">'</span>,</span>
<span id="cb14-43"><a href="#cb14-43" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Unadj Med Inc'</span>: <span class="st">'$</span><span class="sc">{:,.0f}</span><span class="st">'</span>,</span>
<span id="cb14-44"><a href="#cb14-44" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Correction Factor'</span>: <span class="st">'</span><span class="sc">{:.4f}</span><span class="st">'</span>,</span>
<span id="cb14-45"><a href="#cb14-45" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Adj Med Income'</span>: <span class="st">'$</span><span class="sc">{:,.0f}</span><span class="st">'</span>,</span>
<span id="cb14-46"><a href="#cb14-46" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Inflation Adj Factor'</span>: <span class="st">'</span><span class="sc">{:.4f}</span><span class="st">'</span>,</span>
<span id="cb14-47"><a href="#cb14-47" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Median Income'</span>: <span class="st">'$</span><span class="sc">{:,.0f}</span><span class="st">'</span></span>
<span id="cb14-48"><a href="#cb14-48" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb14-49"><a href="#cb14-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-50"><a href="#cb14-50" aria-hidden="true" tabindex="-1"></a>df_median_income <span class="op">=</span> df_summary.copy()</span>
<span id="cb14-51"><a href="#cb14-51" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col, fmt <span class="kw">in</span> format_specs.items():</span>
<span id="cb14-52"><a href="#cb14-52" aria-hidden="true" tabindex="-1"></a>    df_median_income[col] <span class="op">=</span> df_summary[col].<span class="bu">apply</span>(<span class="kw">lambda</span> x: fmt.<span class="bu">format</span>(x))</span>
<span id="cb14-53"><a href="#cb14-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-54"><a href="#cb14-54" aria-hidden="true" tabindex="-1"></a>df_median_income</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="10">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Sum HH</th>
<th data-quarto-table-cell-role="th">Sum HH * Inc</th>
<th data-quarto-table-cell-role="th">Unadj Med Inc</th>
<th data-quarto-table-cell-role="th">Correction Factor</th>
<th data-quarto-table-cell-role="th">Adj Med Income</th>
<th data-quarto-table-cell-role="th">Inflation Adj Factor</th>
<th data-quarto-table-cell-role="th">Median Income</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">Average</th>
<td>1,094,896</td>
<td>124,503,122,500</td>
<td>$113,712</td>
<td>0.8069</td>
<td>$91,750</td>
<td>1.0000</td>
<td>$91,750</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Low Inc</th>
<td>262,353</td>
<td>7,428,247,500</td>
<td>$28,314</td>
<td>0.8069</td>
<td>$22,845</td>
<td>1.0000</td>
<td>$22,845</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">High Inc</th>
<td>832,543</td>
<td>117,074,875,000</td>
<td>$140,623</td>
<td>0.8069</td>
<td>$113,463</td>
<td>1.0000</td>
<td>$113,463</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p><strong>What we find:</strong></p>
<ul>
<li><strong>Average Median Income</strong>: The overall median for all Utah households, matching the ACS B19013 estimate</li>
<li><strong>Low Income Median</strong>: The median for the bottom quartile, representing lower-wage workers, retirees on fixed incomes, and households with part-time employment</li>
<li><strong>High Income Median</strong>: The median for the upper three quartiles combined, representing professional workers, dual-income households, and higher-wage earners</li>
</ul>
<p>These three values form the foundation for calculating income-differentiated VOT parameters.</p>
</section>
<section id="value-of-time-in-model-base-year-dollars" class="level3">
<h3 class="anchored" data-anchor-id="value-of-time-in-model-base-year-dollars">Value of Time (in Model Base Year Dollars)</h3>
<p>The Value of Time converts annual income into an hourly rate, then applies purpose-specific multipliers to reflect how travelers trade off time and money for different trip types. The fundamental assumption is that VOT relates to income—higher earners value time more—but the relationship isn’t one-to-one.</p>
<p>Research from revealed preference studies (toll usage patterns) and stated preference surveys consistently shows that:</p>
<ul>
<li>People value work trip time at 35-50% of their wage rate (employers care about productivity, commuters care about stress and lost leisure)</li>
<li>People value personal trip time at 25-35% of their wage rate (pure leisure trade-off)</li>
<li>Commercial vehicles have higher VOT reflecting business operating costs beyond driver wages</li>
</ul>
<p>The percentages we apply come from regional travel behavior studies, calibrated to match observed patterns in toll lane usage, route choice, and mode choice behavior.</p>
<section id="calculate-hourly-income" class="level4">
<h4 class="anchored" data-anchor-id="calculate-hourly-income">Calculate Hourly Income</h4>
<p>We convert annual median income to an hourly rate by dividing by 2,080 hours (52 weeks × 40 hours/week). This assumes full-time, year-round employment, which is a standard convention in VOT estimation. While not every household member works full-time, this standardization allows consistent comparison across income groups and aligns with how wages are typically expressed.</p>
<div id="8a912daf" class="cell" data-execution_count="12">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert annual median income to hourly rate (assuming 2080 work hours/year)</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>df_hourly <span class="op">=</span> pd.DataFrame({</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Median Income'</span>: df_summary[<span class="st">'Median Income'</span>],</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Hourly Rate'</span>: df_summary[<span class="st">'Median Income'</span>] <span class="op">/</span> <span class="dv">2080</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>}, index<span class="op">=</span>[<span class="st">'Average'</span>, <span class="st">'Low Inc'</span>, <span class="st">'High Inc'</span>])</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>df_hourly.style.<span class="bu">format</span>({</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Median Income'</span>: <span class="st">'$</span><span class="sc">{:,.0f}</span><span class="st">'</span>,</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Hourly Rate'</span>: <span class="st">'$</span><span class="sc">{:.2f}</span><span class="st">'</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="11">
<style type="text/css">
</style>

<table id="T_df72e" class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th class="blank level0" data-quarto-table-cell-role="th">&nbsp;</th>
<th id="T_df72e_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">Median Income</th>
<th id="T_df72e_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">Hourly Rate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th id="T_df72e_level0_row0" class="row_heading level0 row0" data-quarto-table-cell-role="th">Average</th>
<td id="T_df72e_row0_col0" class="data row0 col0">$91,750</td>
<td id="T_df72e_row0_col1" class="data row0 col1">$44.11</td>
</tr>
<tr class="even">
<th id="T_df72e_level0_row1" class="row_heading level0 row1" data-quarto-table-cell-role="th">Low Inc</th>
<td id="T_df72e_row1_col0" class="data row1 col0">$22,845</td>
<td id="T_df72e_row1_col1" class="data row1 col1">$10.98</td>
</tr>
<tr class="odd">
<th id="T_df72e_level0_row2" class="row_heading level0 row2" data-quarto-table-cell-role="th">High Inc</th>
<td id="T_df72e_row2_col0" class="data row2 col0">$113,463</td>
<td id="T_df72e_row2_col1" class="data row2 col1">$54.55</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><strong>What we find:</strong> The hourly rates provide an intuitive way to think about the opportunity cost of time. For example, if the average household has an hourly rate of $45, spending an hour in traffic has a notional cost of $45 in lost productive time or leisure.</p>
</section>
<section id="calculate-vot-in-cents-per-mile" class="level4">
<h4 class="anchored" data-anchor-id="calculate-vot-in-cents-per-mile">Calculate VOT in cents per mile</h4>
<p>These hardcoded percentages represent the fraction of hourly wage that travelers implicitly value their travel time at, based on observed behavior in previous studies. The percentages differ by trip purpose because:</p>
<p><strong>Work Trips (higher %)</strong>: Include both the opportunity cost to the traveler AND the employer’s interest in worker productivity. However, it’s typically less than 100% of the wage because commute time is partially compensated through location choice (people choose home/work locations balancing commute time against housing costs and wages).</p>
<p><strong>Personal Trips (lower %)</strong>: Reflect pure leisure time trade-offs. People are willing to spend more time traveling when they have flexibility and the marginal utility of saved time is lower.</p>
<p><strong>Income Effects</strong>: Lower-income travelers often show higher VOT as a percentage of income for work trips (they can’t afford to be late) but lower for personal trips (more time-flexible). Higher-income travelers show the opposite pattern.</p>
<p>These percentages have been calibrated in previous model validation efforts to match observed behavior patterns in the region.</p>
<div id="58eddd03" class="cell" data-execution_count="13">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define VOT as percentage of hourly income for each trip purpose and income group</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Hardcoded VOT percentages from previous calculations</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>vot_pct <span class="op">=</span> pd.DataFrame({</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Work'</span>: [<span class="fl">0.39</span>, <span class="fl">0.62</span>, <span class="fl">0.34</span>],</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Personal'</span>: [<span class="fl">0.30</span>, <span class="fl">0.49</span>, <span class="fl">0.27</span>]</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>}, index<span class="op">=</span>[<span class="st">'Average'</span>, <span class="st">'Low Inc'</span>, <span class="st">'High Inc'</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div id="185ea0cb" class="cell" data-execution_count="14">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate VOT in cents per minute (hourly rate * percentage * 100 / 60)</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>vot_cents_min <span class="op">=</span> ((df_hourly[<span class="st">'Hourly Rate'</span>].values[:, <span class="va">None</span>] <span class="op">*</span> vot_pct) <span class="op">*</span> <span class="dv">100</span> <span class="op">/</span> <span class="dv">60</span>).<span class="bu">round</span>(<span class="dv">0</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>vot_cents_min.style.<span class="bu">format</span>({</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Work'</span>: <span class="st">'$</span><span class="sc">{:.1f}</span><span class="st">'</span>,</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Personal'</span>: <span class="st">'$</span><span class="sc">{:.1f}</span><span class="st">'</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="13">
<style type="text/css">
</style>

<table id="T_ec1f4" class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th class="blank level0" data-quarto-table-cell-role="th">&nbsp;</th>
<th id="T_ec1f4_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">Work</th>
<th id="T_ec1f4_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">Personal</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th id="T_ec1f4_level0_row0" class="row_heading level0 row0" data-quarto-table-cell-role="th">Average</th>
<td id="T_ec1f4_row0_col0" class="data row0 col0">$29.0</td>
<td id="T_ec1f4_row0_col1" class="data row0 col1">$22.0</td>
</tr>
<tr class="even">
<th id="T_ec1f4_level0_row1" class="row_heading level0 row1" data-quarto-table-cell-role="th">Low Inc</th>
<td id="T_ec1f4_row1_col0" class="data row1 col0">$11.0</td>
<td id="T_ec1f4_row1_col1" class="data row1 col1">$9.0</td>
</tr>
<tr class="odd">
<th id="T_ec1f4_level0_row2" class="row_heading level0 row2" data-quarto-table-cell-role="th">High Inc</th>
<td id="T_ec1f4_row2_col0" class="data row2 col0">$31.0</td>
<td id="T_ec1f4_row2_col1" class="data row2 col1">$25.0</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="calculate-and-display-work-personal-vot" class="level4">
<h4 class="anchored" data-anchor-id="calculate-and-display-work-personal-vot">Calculate and Display Work &amp; Personal VOT</h4>
<p>We now calculate the final VOT values in cents per minute, the standard unit for travel demand models. The conversion from dollars per hour to cents per minute (multiplying by 100, dividing by 60) makes the values easier to work with in network assignment algorithms where travel times are typically in minutes.</p>
<p><strong>Work VOT Results:</strong> These values represent how much travelers implicitly pay (in toll charges, fuel costs, or inconvenience) to save one minute of travel time on work-related trips. Higher-income travelers have higher work VOT, reflecting both their higher opportunity cost and their greater ability to pay for time savings.</p>
<div id="bb495611" class="cell" data-execution_count="15">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Display Work VOT results</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>df_vot_work <span class="op">=</span> pd.DataFrame({</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'</span><span class="sc">% o</span><span class="st">f Income'</span>: vot_pct[<span class="st">'Work'</span>],</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Unrounded ($/hr)'</span>: df_hourly[<span class="st">'Hourly Rate'</span>] <span class="op">*</span> vot_pct[<span class="st">'Work'</span>],</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'VOT (¢/min)'</span>: vot_cents_min[<span class="st">'Work'</span>],</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Equivalent ($/hr)'</span>: vot_cents_min[<span class="st">'Work'</span>] <span class="op">*</span> <span class="dv">60</span> <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>}, index<span class="op">=</span>[<span class="st">'Average'</span>, <span class="st">'Low Inc'</span>, <span class="st">'High Inc'</span>])</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>df_vot_work.style.<span class="bu">format</span>({</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">'</span><span class="sc">% o</span><span class="st">f Income'</span>: <span class="st">'</span><span class="sc">{:.0%}</span><span class="st">'</span>,</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Unrounded ($/hr)'</span>: <span class="st">'$</span><span class="sc">{:.2f}</span><span class="st">'</span>,</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">'VOT (¢/min)'</span>: <span class="st">'</span><span class="sc">{:.0f}</span><span class="st">'</span>,</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Equivalent ($/hr)'</span>: <span class="st">'$</span><span class="sc">{:.2f}</span><span class="st">'</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="14">
<style type="text/css">
</style>

<table id="T_c365c" class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th class="blank level0" data-quarto-table-cell-role="th">&nbsp;</th>
<th id="T_c365c_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">% of Income</th>
<th id="T_c365c_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">Unrounded ($/hr)</th>
<th id="T_c365c_level0_col2" class="col_heading level0 col2" data-quarto-table-cell-role="th">VOT (¢/min)</th>
<th id="T_c365c_level0_col3" class="col_heading level0 col3" data-quarto-table-cell-role="th">Equivalent ($/hr)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th id="T_c365c_level0_row0" class="row_heading level0 row0" data-quarto-table-cell-role="th">Average</th>
<td id="T_c365c_row0_col0" class="data row0 col0">39%</td>
<td id="T_c365c_row0_col1" class="data row0 col1">$17.20</td>
<td id="T_c365c_row0_col2" class="data row0 col2">29</td>
<td id="T_c365c_row0_col3" class="data row0 col3">$17.40</td>
</tr>
<tr class="even">
<th id="T_c365c_level0_row1" class="row_heading level0 row1" data-quarto-table-cell-role="th">Low Inc</th>
<td id="T_c365c_row1_col0" class="data row1 col0">62%</td>
<td id="T_c365c_row1_col1" class="data row1 col1">$6.81</td>
<td id="T_c365c_row1_col2" class="data row1 col2">11</td>
<td id="T_c365c_row1_col3" class="data row1 col3">$6.60</td>
</tr>
<tr class="odd">
<th id="T_c365c_level0_row2" class="row_heading level0 row2" data-quarto-table-cell-role="th">High Inc</th>
<td id="T_c365c_row2_col0" class="data row2 col0">34%</td>
<td id="T_c365c_row2_col1" class="data row2 col1">$18.55</td>
<td id="T_c365c_row2_col2" class="data row2 col2">31</td>
<td id="T_c365c_row2_col3" class="data row2 col3">$18.60</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><strong>Personal VOT Results:</strong> Personal trip VOT is consistently lower than work VOT across all income groups. The relative difference between income groups is also more pronounced, as higher-income households have more discretionary income to trade for leisure time convenience.</p>
<div id="15928cf4" class="cell" data-execution_count="16">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Display Personal VOT results</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>df_vot_personal <span class="op">=</span> pd.DataFrame({</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'</span><span class="sc">% o</span><span class="st">f Income'</span>: vot_pct[<span class="st">'Personal'</span>],</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Unrounded ($/hr)'</span>: df_hourly[<span class="st">'Hourly Rate'</span>] <span class="op">*</span> vot_pct[<span class="st">'Personal'</span>],</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'VOT (¢/min)'</span>: vot_cents_min[<span class="st">'Personal'</span>],</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Equivalent ($/hr)'</span>: vot_cents_min[<span class="st">'Personal'</span>] <span class="op">*</span> <span class="dv">60</span> <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>}, index<span class="op">=</span>[<span class="st">'Average'</span>, <span class="st">'Low Inc'</span>, <span class="st">'High Inc'</span>])</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>df_vot_personal.style.<span class="bu">format</span>({</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">'</span><span class="sc">% o</span><span class="st">f Income'</span>: <span class="st">'</span><span class="sc">{:.0%}</span><span class="st">'</span>,</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Unrounded ($/hr)'</span>: <span class="st">'$</span><span class="sc">{:.2f}</span><span class="st">'</span>,</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">'VOT (¢/min)'</span>: <span class="st">'</span><span class="sc">{:.0f}</span><span class="st">'</span>,</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Equivalent ($/hr)'</span>: <span class="st">'$</span><span class="sc">{:.2f}</span><span class="st">'</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="15">
<style type="text/css">
</style>

<table id="T_b7f3c" class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th class="blank level0" data-quarto-table-cell-role="th">&nbsp;</th>
<th id="T_b7f3c_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">% of Income</th>
<th id="T_b7f3c_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">Unrounded ($/hr)</th>
<th id="T_b7f3c_level0_col2" class="col_heading level0 col2" data-quarto-table-cell-role="th">VOT (¢/min)</th>
<th id="T_b7f3c_level0_col3" class="col_heading level0 col3" data-quarto-table-cell-role="th">Equivalent ($/hr)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th id="T_b7f3c_level0_row0" class="row_heading level0 row0" data-quarto-table-cell-role="th">Average</th>
<td id="T_b7f3c_row0_col0" class="data row0 col0">30%</td>
<td id="T_b7f3c_row0_col1" class="data row0 col1">$13.23</td>
<td id="T_b7f3c_row0_col2" class="data row0 col2">22</td>
<td id="T_b7f3c_row0_col3" class="data row0 col3">$13.20</td>
</tr>
<tr class="even">
<th id="T_b7f3c_level0_row1" class="row_heading level0 row1" data-quarto-table-cell-role="th">Low Inc</th>
<td id="T_b7f3c_row1_col0" class="data row1 col0">49%</td>
<td id="T_b7f3c_row1_col1" class="data row1 col1">$5.38</td>
<td id="T_b7f3c_row1_col2" class="data row1 col2">9</td>
<td id="T_b7f3c_row1_col3" class="data row1 col3">$5.40</td>
</tr>
<tr class="odd">
<th id="T_b7f3c_level0_row2" class="row_heading level0 row2" data-quarto-table-cell-role="th">High Inc</th>
<td id="T_b7f3c_row2_col0" class="data row2 col0">27%</td>
<td id="T_b7f3c_row2_col1" class="data row2 col1">$14.73</td>
<td id="T_b7f3c_row2_col2" class="data row2 col2">25</td>
<td id="T_b7f3c_row2_col3" class="data row2 col3">$15.00</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><strong>Model Application:</strong> These VOT values feed directly into the mode choice and route choice components of the travel demand model. For example, if a toll road saves 10 minutes compared to a free alternative, a traveler will choose the toll road if the toll cost is less than (10 minutes × VOT). The model predicts what fraction of travelers find the trade-off worthwhile based on their income segment and trip purpose distribution.</p>
</section>
<section id="calculate-and-display-truck-vot" class="level4">
<h4 class="anchored" data-anchor-id="calculate-and-display-truck-vot">Calculate and Display Truck VOT</h4>
<p>Commercial vehicle VOT requires a different framework than passenger vehicles because it reflects business operating costs rather than personal wage rates. Truck VOT includes:</p>
<ul>
<li>Driver wages and benefits</li>
<li>Vehicle operating costs (fuel, maintenance, depreciation)</li>
<li>Cargo value and time-sensitivity</li>
<li>Business overhead and profit margins</li>
</ul>
<p>The percentages (relative to average household income) are calibrated to match observed commercial vehicle behavior, particularly toll road usage patterns. Larger trucks have higher VOT because they carry more valuable cargo, have higher operating costs per hour, and typically serve time-sensitive delivery schedules.</p>
<p><strong>Truck Categories:</strong></p>
<ul>
<li><strong>Light Trucks</strong>: Small commercial vehicles, delivery vans, service vehicles</li>
<li><strong>Medium Trucks</strong>: Box trucks, small semi-trailers, regional delivery vehicles</li>
<li><strong>Heavy Trucks</strong>: Large semi-trailers, long-haul freight, bulk cargo carriers</li>
</ul>
<div id="6cd2eabd" class="cell" data-execution_count="17">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate Truck VOT (using Average income as base)</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Hard coded percentages for truck types</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>truck_pct <span class="op">=</span> pd.Series([<span class="fl">0.65</span>, <span class="fl">0.87</span>, <span class="fl">1.10</span>], index<span class="op">=</span>[<span class="st">'Light'</span>, <span class="st">'Medium'</span>, <span class="st">'Heavy'</span>])</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>df_vot_trucks <span class="op">=</span> pd.DataFrame({</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'</span><span class="sc">% o</span><span class="st">f Income'</span>: truck_pct,</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Unrounded ($/hr)'</span>: df_hourly.loc[<span class="st">'Average'</span>, <span class="st">'Hourly Rate'</span>] <span class="op">*</span> truck_pct,</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">'VOT (¢/min)'</span>: ((df_hourly.loc[<span class="st">'Average'</span>, <span class="st">'Hourly Rate'</span>] <span class="op">*</span> truck_pct) <span class="op">*</span> <span class="dv">100</span> <span class="op">/</span> <span class="dv">60</span>).<span class="bu">round</span>(<span class="dv">0</span>)</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>df_vot_trucks[<span class="st">'Equivalent ($/hr)'</span>] <span class="op">=</span> df_vot_trucks[<span class="st">'VOT (¢/min)'</span>] <span class="op">*</span> <span class="dv">60</span> <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>df_vot_trucks.style.<span class="bu">format</span>({</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">'</span><span class="sc">% o</span><span class="st">f Income'</span>: <span class="st">'</span><span class="sc">{:.0%}</span><span class="st">'</span>,</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Unrounded ($/hr)'</span>: <span class="st">'$</span><span class="sc">{:.2f}</span><span class="st">'</span>,</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">'VOT (¢/min)'</span>: <span class="st">'</span><span class="sc">{:.0f}</span><span class="st">'</span>,</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Equivalent ($/hr)'</span>: <span class="st">'$</span><span class="sc">{:.2f}</span><span class="st">'</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="16">
<style type="text/css">
</style>

<table id="T_7beb4" class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th class="blank level0" data-quarto-table-cell-role="th">&nbsp;</th>
<th id="T_7beb4_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">% of Income</th>
<th id="T_7beb4_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">Unrounded ($/hr)</th>
<th id="T_7beb4_level0_col2" class="col_heading level0 col2" data-quarto-table-cell-role="th">VOT (¢/min)</th>
<th id="T_7beb4_level0_col3" class="col_heading level0 col3" data-quarto-table-cell-role="th">Equivalent ($/hr)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th id="T_7beb4_level0_row0" class="row_heading level0 row0" data-quarto-table-cell-role="th">Light</th>
<td id="T_7beb4_row0_col0" class="data row0 col0">65%</td>
<td id="T_7beb4_row0_col1" class="data row0 col1">$28.67</td>
<td id="T_7beb4_row0_col2" class="data row0 col2">48</td>
<td id="T_7beb4_row0_col3" class="data row0 col3">$28.80</td>
</tr>
<tr class="even">
<th id="T_7beb4_level0_row1" class="row_heading level0 row1" data-quarto-table-cell-role="th">Medium</th>
<td id="T_7beb4_row1_col0" class="data row1 col0">87%</td>
<td id="T_7beb4_row1_col1" class="data row1 col1">$38.38</td>
<td id="T_7beb4_row1_col2" class="data row1 col2">64</td>
<td id="T_7beb4_row1_col3" class="data row1 col3">$38.40</td>
</tr>
<tr class="odd">
<th id="T_7beb4_level0_row2" class="row_heading level0 row2" data-quarto-table-cell-role="th">Heavy</th>
<td id="T_7beb4_row2_col0" class="data row2 col0">110%</td>
<td id="T_7beb4_row2_col1" class="data row2 col1">$48.52</td>
<td id="T_7beb4_row2_col2" class="data row2 col2">81</td>
<td id="T_7beb4_row2_col3" class="data row2 col3">$48.60</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><strong>What we find:</strong> Heavy truck VOT can exceed $30/hour, reflecting the high cost of keeping valuable cargo and expensive equipment idle in traffic. This high VOT explains why commercial vehicles disproportionately use toll facilities and why freight routing is highly sensitive to congestion and travel time reliability.</p>
</section>
</section>
</section>
<section id="export-results" class="level2" data-number="7">
<h2 data-number="7" class="anchored" data-anchor-id="export-results"><span class="header-section-number">7</span> Export Results</h2>
<p>The final step packages our calculated VOT parameters in formats ready for model implementation and documentation.</p>
<section id="create-final-vot-table" class="level3">
<h3 class="anchored" data-anchor-id="create-final-vot-table">Create Final VOT Table</h3>
<p>This table assembles all VOT parameters into a single reference dataset matching the travel demand model’s naming conventions. Each parameter corresponds to a specific traveler type and trip purpose combination:</p>
<p><strong>Parameter Definitions:</strong></p>
<ul>
<li><strong>VOT_Auto_Wrk</strong>: Standard work trip VOT (average income)</li>
<li><strong>VOT_Auto_Per</strong>: Standard personal trip VOT (average income)</li>
<li><strong>VOT_Auto_Ext</strong>: External trips (average of work and personal, used for through-trips)</li>
<li><strong>VOT_LT, VOT_MD, VOT_HV</strong>: Light, medium, and heavy truck VOT</li>
<li><strong>VOT_Auto_Wrk_Lo, VOT_Auto_Per_Lo</strong>: Low-income work and personal trip VOT</li>
<li><strong>VOT_Auto_Wrk_Hi, VOT_Auto_Per_Hi</strong>: High-income work and personal trip VOT</li>
</ul>
<p>The table displays values in both cents per minute (for model input) and dollars per hour (for intuitive interpretation).</p>
<div id="7c722e1a" class="cell" data-execution_count="18">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Build the final VOT parameters table</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>df_vot_params <span class="op">=</span> pd.DataFrame({</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Parameter'</span>: [</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">'VOT_Auto_Wrk'</span>, <span class="st">'VOT_Auto_Per'</span>, <span class="st">'VOT_Auto_Ext'</span>,</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">'VOT_LT'</span>, <span class="st">'VOT_MD'</span>, <span class="st">'VOT_HV'</span>,</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">'VOT_Auto_Wrk_Lo'</span>, <span class="st">'VOT_Auto_Per_Lo'</span>,</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">'VOT_Auto_Wrk_Hi'</span>, <span class="st">'VOT_Auto_Per_Hi'</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">'VOT (cent/min)'</span>: [</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>        vot_cents_min.loc[<span class="st">'Average'</span>, <span class="st">'Work'</span>],</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>        vot_cents_min.loc[<span class="st">'Average'</span>, <span class="st">'Personal'</span>],</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>        (vot_cents_min.loc[<span class="st">'Average'</span>, <span class="st">'Work'</span>] <span class="op">+</span> vot_cents_min.loc[<span class="st">'Average'</span>, <span class="st">'Personal'</span>]) <span class="op">/</span> <span class="dv">2</span>,</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>        df_vot_trucks.loc[<span class="st">'Light'</span>, <span class="st">'VOT (¢/min)'</span>],</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>        df_vot_trucks.loc[<span class="st">'Medium'</span>, <span class="st">'VOT (¢/min)'</span>],</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>        df_vot_trucks.loc[<span class="st">'Heavy'</span>, <span class="st">'VOT (¢/min)'</span>],</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>        vot_cents_min.loc[<span class="st">'Low Inc'</span>, <span class="st">'Work'</span>],</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>        vot_cents_min.loc[<span class="st">'Low Inc'</span>, <span class="st">'Personal'</span>],</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>        vot_cents_min.loc[<span class="st">'High Inc'</span>, <span class="st">'Work'</span>],</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>        vot_cents_min.loc[<span class="st">'High Inc'</span>, <span class="st">'Personal'</span>]</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>df_vot_params[<span class="st">'VOT ($/hr)'</span>] <span class="op">=</span> df_vot_params[<span class="st">'VOT (cent/min)'</span>] <span class="op">*</span> <span class="dv">60</span> <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>df_vot_params.style.<span class="bu">format</span>({</span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>    <span class="st">'VOT (cent/min)'</span>: <span class="st">'</span><span class="sc">{:.0f}</span><span class="st">¢'</span>,</span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>    <span class="st">'VOT ($/hr)'</span>: <span class="st">'$</span><span class="sc">{:.1f}</span><span class="st">'</span></span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="17">
<style type="text/css">
</style>

<table id="T_90d44" class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th class="blank level0" data-quarto-table-cell-role="th">&nbsp;</th>
<th id="T_90d44_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">Parameter</th>
<th id="T_90d44_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">VOT (cent/min)</th>
<th id="T_90d44_level0_col2" class="col_heading level0 col2" data-quarto-table-cell-role="th">VOT ($/hr)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th id="T_90d44_level0_row0" class="row_heading level0 row0" data-quarto-table-cell-role="th">0</th>
<td id="T_90d44_row0_col0" class="data row0 col0">VOT_Auto_Wrk</td>
<td id="T_90d44_row0_col1" class="data row0 col1">29¢</td>
<td id="T_90d44_row0_col2" class="data row0 col2">$17.4</td>
</tr>
<tr class="even">
<th id="T_90d44_level0_row1" class="row_heading level0 row1" data-quarto-table-cell-role="th">1</th>
<td id="T_90d44_row1_col0" class="data row1 col0">VOT_Auto_Per</td>
<td id="T_90d44_row1_col1" class="data row1 col1">22¢</td>
<td id="T_90d44_row1_col2" class="data row1 col2">$13.2</td>
</tr>
<tr class="odd">
<th id="T_90d44_level0_row2" class="row_heading level0 row2" data-quarto-table-cell-role="th">2</th>
<td id="T_90d44_row2_col0" class="data row2 col0">VOT_Auto_Ext</td>
<td id="T_90d44_row2_col1" class="data row2 col1">26¢</td>
<td id="T_90d44_row2_col2" class="data row2 col2">$15.3</td>
</tr>
<tr class="even">
<th id="T_90d44_level0_row3" class="row_heading level0 row3" data-quarto-table-cell-role="th">3</th>
<td id="T_90d44_row3_col0" class="data row3 col0">VOT_LT</td>
<td id="T_90d44_row3_col1" class="data row3 col1">48¢</td>
<td id="T_90d44_row3_col2" class="data row3 col2">$28.8</td>
</tr>
<tr class="odd">
<th id="T_90d44_level0_row4" class="row_heading level0 row4" data-quarto-table-cell-role="th">4</th>
<td id="T_90d44_row4_col0" class="data row4 col0">VOT_MD</td>
<td id="T_90d44_row4_col1" class="data row4 col1">64¢</td>
<td id="T_90d44_row4_col2" class="data row4 col2">$38.4</td>
</tr>
<tr class="even">
<th id="T_90d44_level0_row5" class="row_heading level0 row5" data-quarto-table-cell-role="th">5</th>
<td id="T_90d44_row5_col0" class="data row5 col0">VOT_HV</td>
<td id="T_90d44_row5_col1" class="data row5 col1">81¢</td>
<td id="T_90d44_row5_col2" class="data row5 col2">$48.6</td>
</tr>
<tr class="odd">
<th id="T_90d44_level0_row6" class="row_heading level0 row6" data-quarto-table-cell-role="th">6</th>
<td id="T_90d44_row6_col0" class="data row6 col0">VOT_Auto_Wrk_Lo</td>
<td id="T_90d44_row6_col1" class="data row6 col1">11¢</td>
<td id="T_90d44_row6_col2" class="data row6 col2">$6.6</td>
</tr>
<tr class="even">
<th id="T_90d44_level0_row7" class="row_heading level0 row7" data-quarto-table-cell-role="th">7</th>
<td id="T_90d44_row7_col0" class="data row7 col0">VOT_Auto_Per_Lo</td>
<td id="T_90d44_row7_col1" class="data row7 col1">9¢</td>
<td id="T_90d44_row7_col2" class="data row7 col2">$5.4</td>
</tr>
<tr class="odd">
<th id="T_90d44_level0_row8" class="row_heading level0 row8" data-quarto-table-cell-role="th">8</th>
<td id="T_90d44_row8_col0" class="data row8 col0">VOT_Auto_Wrk_Hi</td>
<td id="T_90d44_row8_col1" class="data row8 col1">31¢</td>
<td id="T_90d44_row8_col2" class="data row8 col2">$18.6</td>
</tr>
<tr class="even">
<th id="T_90d44_level0_row9" class="row_heading level0 row9" data-quarto-table-cell-role="th">9</th>
<td id="T_90d44_row9_col0" class="data row9 col0">VOT_Auto_Per_Hi</td>
<td id="T_90d44_row9_col1" class="data row9 col1">25¢</td>
<td id="T_90d44_row9_col2" class="data row9 col2">$15.0</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="export-to-csv" class="level3">
<h3 class="anchored" data-anchor-id="export-to-csv">Export to CSV</h3>
<p>We export the final VOT parameters to a CSV file for easy integration into the travel demand model configuration. This file becomes the authoritative source for VOT parameters, documenting the values used in model runs and providing traceability back to the source data and methodology.</p>
<div id="0957da33" class="cell" data-execution_count="19">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create output directory if it doesn't exist</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>output_dir <span class="op">=</span> Path(<span class="st">"_output"</span>)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>output_dir.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Export to CSV</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>df_vot_params.to_csv(</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    output_dir <span class="op">/</span> <span class="st">"value_of_time.csv"</span>,</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    index<span class="op">=</span><span class="va">False</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>The exported file can be version-controlled alongside the model, ensuring that any changes to VOT assumptions are tracked and documented. When updating the model to new base years or recalibrating with new income data, this notebook can be re-run to generate updated VOT parameters consistently.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Download the output files:">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Download the output files:
</div>
</div>
<div class="callout-body-container callout-body">
<p><a href="./_output/value_of_time.csv">value_of_time.csv</a></p>
</div>
</div>
<!-- -->

</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb23" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> Value of Time Estimation</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="an">subtitle:</span><span class="co"> Estimating the Value of Time (VOT) Parameter for Utah's Travel Demand Model</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="an">description:</span><span class="co"> This notebook replicates the analysis from the '_archive/_Source - Med Income &amp; Value of Time - 2022-08-09.xlsb' using the Utah Household and Hosehold Income data from 2019-2023 American Community Survey 5-Year Estimates. The VOTs are segmented by occupancy and purpose (work vs. personal).</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="co"> - name: Pukar Bhandari</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co">   email: pukar.bhandari@wfrc.utah.gov</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="co">   affiliation:</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="co">     - name: Wasatch Front Regional Council</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="co">       url: "https://wfrc.utah.gov/"</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "2025-10-14"</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="an">execute:</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a><span class="co">   eval: true</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a><span class="an">jupyter:</span><span class="co"> python3</span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a><span class="co">    theme:</span></span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a><span class="co">        light: flatly</span></span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a><span class="co">        dark: darkly</span></span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a><span class="co">    respect-user-color-scheme: true</span></span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a><span class="co">    fig-width: 8.4</span></span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a><span class="co">    fig-height: 5.44</span></span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a><span class="co">    fig-responsive: true</span></span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a><span class="co">    number-sections: true</span></span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a><span class="co">    number-depth: 2</span></span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a><span class="co">    html-math-method: katex</span></span>
<span id="cb23-32"><a href="#cb23-32" aria-hidden="true" tabindex="-1"></a><span class="co">    code-link: true</span></span>
<span id="cb23-33"><a href="#cb23-33" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb23-34"><a href="#cb23-34" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: true</span></span>
<span id="cb23-35"><a href="#cb23-35" aria-hidden="true" tabindex="-1"></a><span class="co">    code-summary: "Show the code"</span></span>
<span id="cb23-36"><a href="#cb23-36" aria-hidden="true" tabindex="-1"></a><span class="co">    # fig-width: 8</span></span>
<span id="cb23-37"><a href="#cb23-37" aria-hidden="true" tabindex="-1"></a><span class="co">    # fig-height: 5</span></span>
<span id="cb23-38"><a href="#cb23-38" aria-hidden="true" tabindex="-1"></a><span class="co">    # out-width: "100%"</span></span>
<span id="cb23-39"><a href="#cb23-39" aria-hidden="true" tabindex="-1"></a><span class="co">    # fig-align: center</span></span>
<span id="cb23-40"><a href="#cb23-40" aria-hidden="true" tabindex="-1"></a><span class="co">    resources:</span></span>
<span id="cb23-41"><a href="#cb23-41" aria-hidden="true" tabindex="-1"></a><span class="co">        - "_output/*.csv"</span></span>
<span id="cb23-42"><a href="#cb23-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-43"><a href="#cb23-43" aria-hidden="true" tabindex="-1"></a><span class="an">title-block-banner:</span><span class="co"> true</span></span>
<span id="cb23-44"><a href="#cb23-44" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb23-45"><a href="#cb23-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-46"><a href="#cb23-46" aria-hidden="true" tabindex="-1"></a><span class="fu">## Introduction</span></span>
<span id="cb23-47"><a href="#cb23-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-48"><a href="#cb23-48" aria-hidden="true" tabindex="-1"></a>This analysis estimates the Value of Time (VOT) parameters for Utah's travel demand model using income data from the American Community Survey (ACS) 2019-2023 5-Year Estimates. The VOT represents how much travelers value their time, expressed in cents per minute, and is a critical parameter for evaluating transportation projects and predicting mode choice behavior.</span>
<span id="cb23-49"><a href="#cb23-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-50"><a href="#cb23-50" aria-hidden="true" tabindex="-1"></a>The methodology segments travelers by income level (low, average, and high) and trip purpose (work vs. personal trips), recognizing that different travelers value their time differently. Work trips typically have higher VOT since travel time directly impacts productivity, while personal trips reflect individuals' willingness to trade time for money in their leisure activities.</span>
<span id="cb23-51"><a href="#cb23-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-52"><a href="#cb23-52" aria-hidden="true" tabindex="-1"></a>This notebook replicates and updates the methodology from the archived Excel workbook, providing a transparent, reproducible workflow using open source data science tools.</span>
<span id="cb23-53"><a href="#cb23-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-54"><a href="#cb23-54" aria-hidden="true" tabindex="-1"></a><span class="fu">## Environment Setup</span></span>
<span id="cb23-55"><a href="#cb23-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-56"><a href="#cb23-56" aria-hidden="true" tabindex="-1"></a><span class="fu">### Install Required Packages</span></span>
<span id="cb23-57"><a href="#cb23-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-58"><a href="#cb23-58" aria-hidden="true" tabindex="-1"></a>This section prepares the computing environment by loading necessary Python libraries and configuring project-specific settings. We use pandas and numpy for data manipulation, geopandas for spatial operations, and pygris for seamless access to Census data. The visualization libraries (matplotlib and seaborn) will help us understand income distributions and validate our calculations.</span>
<span id="cb23-59"><a href="#cb23-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-60"><a href="#cb23-60" aria-hidden="true" tabindex="-1"></a><span class="in">``` python</span></span>
<span id="cb23-61"><a href="#cb23-61" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>conda install <span class="op">-</span>c conda<span class="op">-</span>forge numpy pandas geopandas matplotlib seaborn python<span class="op">-</span>dotenv openpyxl</span>
<span id="cb23-62"><a href="#cb23-62" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install pygris</span>
<span id="cb23-63"><a href="#cb23-63" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-64"><a href="#cb23-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-65"><a href="#cb23-65" aria-hidden="true" tabindex="-1"></a><span class="fu">### Load Libraries</span></span>
<span id="cb23-66"><a href="#cb23-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-67"><a href="#cb23-67" aria-hidden="true" tabindex="-1"></a>Import all required libraries for the analysis. The pygris library enables direct access to Census Bureau geographic data and ACS estimates through their API.</span>
<span id="cb23-68"><a href="#cb23-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-71"><a href="#cb23-71" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-72"><a href="#cb23-72" aria-hidden="true" tabindex="-1"></a><span class="co"># For Analysis</span></span>
<span id="cb23-73"><a href="#cb23-73" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb23-74"><a href="#cb23-74" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb23-75"><a href="#cb23-75" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb23-76"><a href="#cb23-76" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> warnings</span>
<span id="cb23-77"><a href="#cb23-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-78"><a href="#cb23-78" aria-hidden="true" tabindex="-1"></a><span class="co"># For Visualization</span></span>
<span id="cb23-79"><a href="#cb23-79" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb23-80"><a href="#cb23-80" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.dates <span class="im">as</span> mdates</span>
<span id="cb23-81"><a href="#cb23-81" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.ticker <span class="im">as</span> ticker</span>
<span id="cb23-82"><a href="#cb23-82" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb23-83"><a href="#cb23-83" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> adjustText <span class="im">import</span> adjust_text</span>
<span id="cb23-84"><a href="#cb23-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-85"><a href="#cb23-85" aria-hidden="true" tabindex="-1"></a><span class="co"># Census data query libraries &amp; modules</span></span>
<span id="cb23-86"><a href="#cb23-86" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pygris <span class="im">import</span> blocks, block_groups, counties, states</span>
<span id="cb23-87"><a href="#cb23-87" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pygris.helpers <span class="im">import</span> validate_state, validate_county</span>
<span id="cb23-88"><a href="#cb23-88" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pygris.data <span class="im">import</span> get_census</span>
<span id="cb23-89"><a href="#cb23-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-90"><a href="#cb23-90" aria-hidden="true" tabindex="-1"></a><span class="co"># misc</span></span>
<span id="cb23-91"><a href="#cb23-91" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> datetime</span>
<span id="cb23-92"><a href="#cb23-92" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb23-93"><a href="#cb23-93" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span>
<span id="cb23-94"><a href="#cb23-94" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb23-95"><a href="#cb23-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-96"><a href="#cb23-96" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> dotenv <span class="im">import</span> load_dotenv</span>
<span id="cb23-97"><a href="#cb23-97" aria-hidden="true" tabindex="-1"></a>load_dotenv()</span>
<span id="cb23-98"><a href="#cb23-98" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-99"><a href="#cb23-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-100"><a href="#cb23-100" aria-hidden="true" tabindex="-1"></a><span class="fu">### Environment Variables</span></span>
<span id="cb23-101"><a href="#cb23-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-102"><a href="#cb23-102" aria-hidden="true" tabindex="-1"></a>We establish Utah-specific geographic parameters for the analysis. The NAD83 / UTM zone 12N coordinate reference system (EPSG:3566) is the standard projection for Utah, providing accurate distance measurements for spatial analysis. The state FIPS code (49) uniquely identifies Utah in federal datasets.</span>
<span id="cb23-103"><a href="#cb23-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-106"><a href="#cb23-106" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-107"><a href="#cb23-107" aria-hidden="true" tabindex="-1"></a>PROJECT_CRS <span class="op">=</span> <span class="st">"EPSG:3566"</span>  <span class="co"># NAD83 / UTM zone 12N</span></span>
<span id="cb23-108"><a href="#cb23-108" aria-hidden="true" tabindex="-1"></a>STATE_FIPS <span class="op">=</span> validate_state(<span class="st">"UT"</span>)</span>
<span id="cb23-109"><a href="#cb23-109" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-110"><a href="#cb23-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-111"><a href="#cb23-111" aria-hidden="true" tabindex="-1"></a>::: {.callout-tip}</span>
<span id="cb23-112"><a href="#cb23-112" aria-hidden="true" tabindex="-1"></a>**Need a Census API key?** Get one for free at <span class="co">[</span><span class="ot">census.gov/developers</span><span class="co">](https://api.census.gov/data/key_signup.html)</span>.</span>
<span id="cb23-113"><a href="#cb23-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-114"><a href="#cb23-114" aria-hidden="true" tabindex="-1"></a>Create a <span class="in">`.env`</span> file in the project directory and add your Census API key:</span>
<span id="cb23-115"><a href="#cb23-115" aria-hidden="true" tabindex="-1"></a>```CENSUS_API_KEY=your-key-here```</span>
<span id="cb23-116"><a href="#cb23-116" aria-hidden="true" tabindex="-1"></a>This enables fetching US Census data from the Census API.</span>
<span id="cb23-117"><a href="#cb23-117" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb23-118"><a href="#cb23-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-121"><a href="#cb23-121" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-122"><a href="#cb23-122" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb23-123"><a href="#cb23-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-124"><a href="#cb23-124" aria-hidden="true" tabindex="-1"></a><span class="co"># Set your API key into environment (alternative to .env file)</span></span>
<span id="cb23-125"><a href="#cb23-125" aria-hidden="true" tabindex="-1"></a>os.environ[<span class="st">'CENSUS_API_KEY'</span>] <span class="op">=</span> <span class="st">'your_api_key_here'</span></span>
<span id="cb23-126"><a href="#cb23-126" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-127"><a href="#cb23-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-128"><a href="#cb23-128" aria-hidden="true" tabindex="-1"></a><span class="fu">## Define Helper Functions</span></span>
<span id="cb23-129"><a href="#cb23-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-130"><a href="#cb23-130" aria-hidden="true" tabindex="-1"></a>To maintain code reusability and follow DRY (Don't Repeat Yourself) principles, we define helper functions for common operations throughout the analysis.</span>
<span id="cb23-131"><a href="#cb23-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-132"><a href="#cb23-132" aria-hidden="true" tabindex="-1"></a><span class="fu">### Fetch Excel Files from BLS or BTS</span></span>
<span id="cb23-133"><a href="#cb23-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-134"><a href="#cb23-134" aria-hidden="true" tabindex="-1"></a>This utility function automates downloading data files from federal agencies. It checks if a file already exists locally before attempting to download, avoiding unnecessary network requests and respecting the agencies' servers. The function includes proper HTTP headers to ensure reliable downloads.</span>
<span id="cb23-135"><a href="#cb23-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-138"><a href="#cb23-138" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-139"><a href="#cb23-139" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fetch_excel(path, url):</span>
<span id="cb23-140"><a href="#cb23-140" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb23-141"><a href="#cb23-141" aria-hidden="true" tabindex="-1"></a><span class="co">    Download Excel file if it doesn't exist locally.</span></span>
<span id="cb23-142"><a href="#cb23-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-143"><a href="#cb23-143" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters:</span></span>
<span id="cb23-144"><a href="#cb23-144" aria-hidden="true" tabindex="-1"></a><span class="co">    -----------</span></span>
<span id="cb23-145"><a href="#cb23-145" aria-hidden="true" tabindex="-1"></a><span class="co">    path : str or Path</span></span>
<span id="cb23-146"><a href="#cb23-146" aria-hidden="true" tabindex="-1"></a><span class="co">        Local file path to save the Excel file</span></span>
<span id="cb23-147"><a href="#cb23-147" aria-hidden="true" tabindex="-1"></a><span class="co">    url : str</span></span>
<span id="cb23-148"><a href="#cb23-148" aria-hidden="true" tabindex="-1"></a><span class="co">        URL to download the Excel file from</span></span>
<span id="cb23-149"><a href="#cb23-149" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb23-150"><a href="#cb23-150" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert to Path object if string</span></span>
<span id="cb23-151"><a href="#cb23-151" aria-hidden="true" tabindex="-1"></a>    filepath <span class="op">=</span> Path(path)</span>
<span id="cb23-152"><a href="#cb23-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-153"><a href="#cb23-153" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Download file if it doesn't exist</span></span>
<span id="cb23-154"><a href="#cb23-154" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> filepath.exists():</span>
<span id="cb23-155"><a href="#cb23-155" aria-hidden="true" tabindex="-1"></a>        filepath.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb23-156"><a href="#cb23-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-157"><a href="#cb23-157" aria-hidden="true" tabindex="-1"></a>        headers <span class="op">=</span> {</span>
<span id="cb23-158"><a href="#cb23-158" aria-hidden="true" tabindex="-1"></a>            <span class="st">'User-Agent'</span>: <span class="st">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'</span></span>
<span id="cb23-159"><a href="#cb23-159" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb23-160"><a href="#cb23-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-161"><a href="#cb23-161" aria-hidden="true" tabindex="-1"></a>        response <span class="op">=</span> requests.get(url, headers<span class="op">=</span>headers)</span>
<span id="cb23-162"><a href="#cb23-162" aria-hidden="true" tabindex="-1"></a>        filepath.write_bytes(response.content)</span>
<span id="cb23-163"><a href="#cb23-163" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-164"><a href="#cb23-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-165"><a href="#cb23-165" aria-hidden="true" tabindex="-1"></a><span class="fu">## Lookup Tables</span></span>
<span id="cb23-166"><a href="#cb23-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-167"><a href="#cb23-167" aria-hidden="true" tabindex="-1"></a>Lookup tables serve as reference datasets that map categories to values. These tables ensure consistency across calculations and make the code more maintainable by centralizing key parameter definitions.</span>
<span id="cb23-168"><a href="#cb23-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-169"><a href="#cb23-169" aria-hidden="true" tabindex="-1"></a><span class="fu">### Income Category Lookup</span></span>
<span id="cb23-170"><a href="#cb23-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-171"><a href="#cb23-171" aria-hidden="true" tabindex="-1"></a>The ACS reports household income in 16 predefined brackets rather than individual values. To perform calculations with this grouped data, we need to estimate representative income values for each bracket. This lookup table defines the boundaries of each income bracket and calculates midpoint values.</span>
<span id="cb23-172"><a href="#cb23-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-173"><a href="#cb23-173" aria-hidden="true" tabindex="-1"></a>For the highest income bracket ($200,000+), which has no upper limit, we use $300,000 as a reasonable midpoint. This value is based on research showing that high-income distributions typically concentrate between $200,000 and $400,000, with $300,000 representing a conservative central estimate.Create a reference table defining the income brackets used in ACS Table B19001. Each bracket has a lower and upper limit, and we calculate midpoints for median estimation. The highest bracket ($200,000+) uses $300,000 as a reasonable midpoint based on income distribution patterns.</span>
<span id="cb23-174"><a href="#cb23-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-177"><a href="#cb23-177" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-178"><a href="#cb23-178" aria-hidden="true" tabindex="-1"></a>lookup_hhinc <span class="op">=</span> pd.DataFrame({</span>
<span id="cb23-179"><a href="#cb23-179" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Income Category"</span>: [</span>
<span id="cb23-180"><a href="#cb23-180" aria-hidden="true" tabindex="-1"></a>    <span class="st">"HH_LT_10K"</span>, <span class="st">"HH_10_15K"</span>, <span class="st">"HH_15_20K"</span>, <span class="st">"HH_20_25K"</span>, <span class="st">"HH_25_30K"</span>, <span class="st">"HH_30_35K"</span>,</span>
<span id="cb23-181"><a href="#cb23-181" aria-hidden="true" tabindex="-1"></a>    <span class="st">"HH_35_40K"</span>, <span class="st">"HH_40_45K"</span>, <span class="st">"HH_45_50K"</span>, <span class="st">"HH_50_60K"</span>, <span class="st">"HH_60_75K"</span>,</span>
<span id="cb23-182"><a href="#cb23-182" aria-hidden="true" tabindex="-1"></a>    <span class="st">"HH_75_100K"</span>, <span class="st">"HH_100_125K"</span>, <span class="st">"HH_125_150K"</span>, <span class="st">"HH_150_200K"</span>, <span class="st">"HH_GT_200K"</span></span>
<span id="cb23-183"><a href="#cb23-183" aria-hidden="true" tabindex="-1"></a>  ],</span>
<span id="cb23-184"><a href="#cb23-184" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Lower Limit"</span>: [</span>
<span id="cb23-185"><a href="#cb23-185" aria-hidden="true" tabindex="-1"></a>    <span class="dv">0</span>, <span class="dv">10000</span>, <span class="dv">15000</span>, <span class="dv">20000</span>, <span class="dv">25000</span>, <span class="dv">30000</span>,</span>
<span id="cb23-186"><a href="#cb23-186" aria-hidden="true" tabindex="-1"></a>    <span class="dv">35000</span>, <span class="dv">40000</span>, <span class="dv">45000</span>, <span class="dv">50000</span>, <span class="dv">60000</span>,</span>
<span id="cb23-187"><a href="#cb23-187" aria-hidden="true" tabindex="-1"></a>    <span class="dv">75000</span>, <span class="dv">100000</span>, <span class="dv">125000</span>, <span class="dv">150000</span>, <span class="dv">200000</span></span>
<span id="cb23-188"><a href="#cb23-188" aria-hidden="true" tabindex="-1"></a>  ],</span>
<span id="cb23-189"><a href="#cb23-189" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Upper Limit"</span>: [</span>
<span id="cb23-190"><a href="#cb23-190" aria-hidden="true" tabindex="-1"></a>    <span class="dv">9999</span>, <span class="dv">14999</span>, <span class="dv">19999</span>, <span class="dv">24999</span>, <span class="dv">29999</span>, <span class="dv">34999</span>,</span>
<span id="cb23-191"><a href="#cb23-191" aria-hidden="true" tabindex="-1"></a>    <span class="dv">39999</span>, <span class="dv">44999</span>, <span class="dv">49999</span>, <span class="dv">59999</span>, <span class="dv">74999</span>,</span>
<span id="cb23-192"><a href="#cb23-192" aria-hidden="true" tabindex="-1"></a>    <span class="dv">99999</span>, <span class="dv">124999</span>, <span class="dv">149999</span>, <span class="dv">199999</span>, np.inf</span>
<span id="cb23-193"><a href="#cb23-193" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb23-194"><a href="#cb23-194" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb23-195"><a href="#cb23-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-196"><a href="#cb23-196" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute midpoint and round it</span></span>
<span id="cb23-197"><a href="#cb23-197" aria-hidden="true" tabindex="-1"></a>lookup_hhinc[<span class="st">'Midpoint'</span>] <span class="op">=</span> (</span>
<span id="cb23-198"><a href="#cb23-198" aria-hidden="true" tabindex="-1"></a>  (lookup_hhinc[<span class="st">'Lower Limit'</span>] <span class="op">+</span> lookup_hhinc[<span class="st">'Upper Limit'</span>]) <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb23-199"><a href="#cb23-199" aria-hidden="true" tabindex="-1"></a>).<span class="bu">round</span>()</span>
<span id="cb23-200"><a href="#cb23-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-201"><a href="#cb23-201" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace infinite midpoint (last category) with 300000</span></span>
<span id="cb23-202"><a href="#cb23-202" aria-hidden="true" tabindex="-1"></a>lookup_hhinc.loc[np.isinf(lookup_hhinc[<span class="st">"Upper Limit"</span>]), <span class="st">"Midpoint"</span>] <span class="op">=</span> <span class="dv">300000</span></span>
<span id="cb23-203"><a href="#cb23-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-204"><a href="#cb23-204" aria-hidden="true" tabindex="-1"></a>lookup_hhinc</span>
<span id="cb23-205"><a href="#cb23-205" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-206"><a href="#cb23-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-207"><a href="#cb23-207" aria-hidden="true" tabindex="-1"></a><span class="fu">## Raw Data Sources</span></span>
<span id="cb23-208"><a href="#cb23-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-209"><a href="#cb23-209" aria-hidden="true" tabindex="-1"></a>This section retrieves the foundational datasets needed for VOT estimation. We access data directly from authoritative federal sources to ensure accuracy and reproducibility.</span>
<span id="cb23-210"><a href="#cb23-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-211"><a href="#cb23-211" aria-hidden="true" tabindex="-1"></a><span class="fu">### Consumer Price Index</span></span>
<span id="cb23-212"><a href="#cb23-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-213"><a href="#cb23-213" aria-hidden="true" tabindex="-1"></a>The CPI-U-RS (Consumer Price Index for All Urban Consumers - Research Series) provides the most consistent measure of inflation over time. While we use current-year dollars in this analysis, having CPI data available enables future inflation adjustments and facilitates comparisons with historical VOT estimates. The research series is specifically designed for longitudinal analysis, maintaining methodological consistency that the standard CPI-U lacks.</span>
<span id="cb23-214"><a href="#cb23-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-215"><a href="#cb23-215" aria-hidden="true" tabindex="-1"></a>Data Source: Consumer Price Index for All Urban Consumers (CPI-U) <span class="sc">\[</span>Source: <span class="co">[</span><span class="ot">Bureau of Labor Statistics</span><span class="co">](https://www.bls.gov/cpi/research-series/r-cpi-u-rs-home.htm)</span><span class="sc">\]</span></span>
<span id="cb23-216"><a href="#cb23-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-219"><a href="#cb23-219" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-220"><a href="#cb23-220" aria-hidden="true" tabindex="-1"></a><span class="co"># Usage</span></span>
<span id="cb23-221"><a href="#cb23-221" aria-hidden="true" tabindex="-1"></a>filepath_cpi <span class="op">=</span> Path(<span class="st">"_data/bls/r-cpi-u-rs-allitems.xlsx"</span>)</span>
<span id="cb23-222"><a href="#cb23-222" aria-hidden="true" tabindex="-1"></a>url_cpi <span class="op">=</span> <span class="st">"https://www.bls.gov/cpi/research-series/r-cpi-u-rs-allitems.xlsx"</span></span>
<span id="cb23-223"><a href="#cb23-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-224"><a href="#cb23-224" aria-hidden="true" tabindex="-1"></a><span class="co"># Download if needed</span></span>
<span id="cb23-225"><a href="#cb23-225" aria-hidden="true" tabindex="-1"></a>fetch_excel(path<span class="op">=</span>filepath_cpi, url<span class="op">=</span>url_cpi)</span>
<span id="cb23-226"><a href="#cb23-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-227"><a href="#cb23-227" aria-hidden="true" tabindex="-1"></a><span class="co"># Read separately</span></span>
<span id="cb23-228"><a href="#cb23-228" aria-hidden="true" tabindex="-1"></a>df_CPI <span class="op">=</span> pd.read_excel(</span>
<span id="cb23-229"><a href="#cb23-229" aria-hidden="true" tabindex="-1"></a>    filepath_cpi,</span>
<span id="cb23-230"><a href="#cb23-230" aria-hidden="true" tabindex="-1"></a>    sheet_name<span class="op">=</span><span class="st">"All items"</span>,</span>
<span id="cb23-231"><a href="#cb23-231" aria-hidden="true" tabindex="-1"></a>    usecols<span class="op">=</span><span class="st">"A:N"</span>,</span>
<span id="cb23-232"><a href="#cb23-232" aria-hidden="true" tabindex="-1"></a>    skiprows<span class="op">=</span><span class="dv">5</span>,</span>
<span id="cb23-233"><a href="#cb23-233" aria-hidden="true" tabindex="-1"></a>    engine<span class="op">=</span><span class="st">'openpyxl'</span></span>
<span id="cb23-234"><a href="#cb23-234" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-235"><a href="#cb23-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-236"><a href="#cb23-236" aria-hidden="true" tabindex="-1"></a>df_CPI</span>
<span id="cb23-237"><a href="#cb23-237" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-238"><a href="#cb23-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-239"><a href="#cb23-239" aria-hidden="true" tabindex="-1"></a>**What we find:** The CPI data shows the annual inflation rates that can be used to adjust income values across different time periods. For travel demand modeling, using inflation-adjusted dollars ensures that VOT parameters remain comparable over multi-year planning horizons.</span>
<span id="cb23-240"><a href="#cb23-240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-241"><a href="#cb23-241" aria-hidden="true" tabindex="-1"></a><span class="fu">### American Community Survey (ACS) 5-Year Estimates</span></span>
<span id="cb23-242"><a href="#cb23-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-243"><a href="#cb23-243" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Define Census Variables</span></span>
<span id="cb23-244"><a href="#cb23-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-245"><a href="#cb23-245" aria-hidden="true" tabindex="-1"></a>The ACS 5-Year Estimates provide the most reliable small-area income statistics available. Unlike the 1-Year estimates, which have large margins of error, the 5-year data aggregates five years of survey responses to produce stable estimates suitable for sub-state analysis. We extract data from two key tables:</span>
<span id="cb23-246"><a href="#cb23-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-247"><a href="#cb23-247" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Table B19013**: Median household income (direct estimate)</span>
<span id="cb23-248"><a href="#cb23-248" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Table B19001**: Household count by income bracket (distribution)</span>
<span id="cb23-249"><a href="#cb23-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-250"><a href="#cb23-250" aria-hidden="true" tabindex="-1"></a>The income brackets in B19001 align perfectly with our lookup table, allowing us to calculate weighted averages and validate the median income from B19013.</span>
<span id="cb23-251"><a href="#cb23-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-254"><a href="#cb23-254" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-255"><a href="#cb23-255" aria-hidden="true" tabindex="-1"></a><span class="co"># Define variables to download</span></span>
<span id="cb23-256"><a href="#cb23-256" aria-hidden="true" tabindex="-1"></a>acs_variables <span class="op">=</span> {</span>
<span id="cb23-257"><a href="#cb23-257" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19013_001E'</span>: <span class="st">'HH_MED_INC'</span>,  <span class="co"># Median Household Income in the Past 12 Months (in 2023 Inflation-Adjusted Dollars)</span></span>
<span id="cb23-258"><a href="#cb23-258" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19013_001M'</span>: <span class="st">'HH_MED_INC_MOE'</span>,  <span class="co"># Margin of Error for Median Household Income</span></span>
<span id="cb23-259"><a href="#cb23-259" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19001_001E'</span>: <span class="st">'HH_TOTAL'</span>,  <span class="co"># Total Households</span></span>
<span id="cb23-260"><a href="#cb23-260" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19001_002E'</span>: <span class="st">'HH_LT_10K'</span>,  <span class="co"># Less than $10,000</span></span>
<span id="cb23-261"><a href="#cb23-261" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19001_003E'</span>: <span class="st">'HH_10_15K'</span>,  <span class="co"># $10,000 to $14,999</span></span>
<span id="cb23-262"><a href="#cb23-262" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19001_004E'</span>: <span class="st">'HH_15_20K'</span>,  <span class="co"># $15,000 to $19,999</span></span>
<span id="cb23-263"><a href="#cb23-263" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19001_005E'</span>: <span class="st">'HH_20_25K'</span>,  <span class="co"># $20,000 to $24,999</span></span>
<span id="cb23-264"><a href="#cb23-264" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19001_006E'</span>: <span class="st">'HH_25_30K'</span>,  <span class="co"># $25,000 to $29,999</span></span>
<span id="cb23-265"><a href="#cb23-265" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19001_007E'</span>: <span class="st">'HH_30_35K'</span>,  <span class="co"># $30,000 to $34,999</span></span>
<span id="cb23-266"><a href="#cb23-266" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19001_008E'</span>: <span class="st">'HH_35_40K'</span>,  <span class="co"># $35,000 to $39,999</span></span>
<span id="cb23-267"><a href="#cb23-267" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19001_009E'</span>: <span class="st">'HH_40_45K'</span>,  <span class="co"># $40,000 to $44,999</span></span>
<span id="cb23-268"><a href="#cb23-268" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19001_010E'</span>: <span class="st">'HH_45_50K'</span>,  <span class="co"># $45,000 to $49,999</span></span>
<span id="cb23-269"><a href="#cb23-269" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19001_011E'</span>: <span class="st">'HH_50_60K'</span>,  <span class="co"># $50,000 to $59,999</span></span>
<span id="cb23-270"><a href="#cb23-270" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19001_012E'</span>: <span class="st">'HH_60_75K'</span>,  <span class="co"># $60,000 to $74,999</span></span>
<span id="cb23-271"><a href="#cb23-271" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19001_013E'</span>: <span class="st">'HH_75_100K'</span>,  <span class="co"># $75,000 to $99,999</span></span>
<span id="cb23-272"><a href="#cb23-272" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19001_014E'</span>: <span class="st">'HH_100_125K'</span>,  <span class="co"># $100,000 to $124,999</span></span>
<span id="cb23-273"><a href="#cb23-273" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19001_015E'</span>: <span class="st">'HH_125_150K'</span>,  <span class="co"># $125,000 to $149,999</span></span>
<span id="cb23-274"><a href="#cb23-274" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19001_016E'</span>: <span class="st">'HH_150_200K'</span>,  <span class="co"># $150,000 to $199,999</span></span>
<span id="cb23-275"><a href="#cb23-275" aria-hidden="true" tabindex="-1"></a>    <span class="st">'B19001_017E'</span>: <span class="st">'HH_GT_200K'</span>  <span class="co"># $200,000 or more</span></span>
<span id="cb23-276"><a href="#cb23-276" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb23-277"><a href="#cb23-277" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-278"><a href="#cb23-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-279"><a href="#cb23-279" aria-hidden="true" tabindex="-1"></a><span class="fu">#### State Level Data</span></span>
<span id="cb23-280"><a href="#cb23-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-281"><a href="#cb23-281" aria-hidden="true" tabindex="-1"></a>We begin with state-level data for Utah to establish baseline income statistics. While our final VOT parameters may use more granular geographic data in the future, state-level estimates provide a robust foundation with minimal sampling error. The large sample size at the state level ensures that our calculated VOT parameters are statistically reliable.</span>
<span id="cb23-282"><a href="#cb23-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-285"><a href="#cb23-285" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-286"><a href="#cb23-286" aria-hidden="true" tabindex="-1"></a><span class="co"># Fetch state boundaries from TIGER/Line shapefiles</span></span>
<span id="cb23-287"><a href="#cb23-287" aria-hidden="true" tabindex="-1"></a>gdf_ut_bound <span class="op">=</span> states(</span>
<span id="cb23-288"><a href="#cb23-288" aria-hidden="true" tabindex="-1"></a>  year<span class="op">=</span><span class="dv">2023</span>,</span>
<span id="cb23-289"><a href="#cb23-289" aria-hidden="true" tabindex="-1"></a>  cache<span class="op">=</span><span class="va">True</span></span>
<span id="cb23-290"><a href="#cb23-290" aria-hidden="true" tabindex="-1"></a>).to_crs(PROJECT_CRS)</span>
<span id="cb23-291"><a href="#cb23-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-292"><a href="#cb23-292" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for Utah only</span></span>
<span id="cb23-293"><a href="#cb23-293" aria-hidden="true" tabindex="-1"></a>gdf_ut_bound <span class="op">=</span> gdf_ut_bound[gdf_ut_bound[<span class="st">'STATEFP'</span>] <span class="op">==</span> <span class="bu">str</span>(STATE_FIPS)]</span>
<span id="cb23-294"><a href="#cb23-294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-295"><a href="#cb23-295" aria-hidden="true" tabindex="-1"></a><span class="co"># Fetch Income data from ACS 5-year estimates for Utah</span></span>
<span id="cb23-296"><a href="#cb23-296" aria-hidden="true" tabindex="-1"></a>df_ut_income <span class="op">=</span> get_census(</span>
<span id="cb23-297"><a href="#cb23-297" aria-hidden="true" tabindex="-1"></a>  dataset<span class="op">=</span><span class="st">"acs/acs5"</span>,</span>
<span id="cb23-298"><a href="#cb23-298" aria-hidden="true" tabindex="-1"></a>  year<span class="op">=</span><span class="dv">2023</span>,</span>
<span id="cb23-299"><a href="#cb23-299" aria-hidden="true" tabindex="-1"></a>  variables<span class="op">=</span><span class="bu">list</span>(acs_variables.keys()),</span>
<span id="cb23-300"><a href="#cb23-300" aria-hidden="true" tabindex="-1"></a>  params<span class="op">=</span>{</span>
<span id="cb23-301"><a href="#cb23-301" aria-hidden="true" tabindex="-1"></a>      <span class="co"># "key": f"{os.getenv('CENSUS_API_KEY')}", # </span><span class="al">FIXME</span><span class="co">: This causes error</span></span>
<span id="cb23-302"><a href="#cb23-302" aria-hidden="true" tabindex="-1"></a>      <span class="st">"for"</span>: <span class="ss">f"state:</span><span class="sc">{</span>STATE_FIPS<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb23-303"><a href="#cb23-303" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb23-304"><a href="#cb23-304" aria-hidden="true" tabindex="-1"></a>    return_geoid<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb23-305"><a href="#cb23-305" aria-hidden="true" tabindex="-1"></a>    guess_dtypes<span class="op">=</span><span class="va">True</span></span>
<span id="cb23-306"><a href="#cb23-306" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-307"><a href="#cb23-307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-308"><a href="#cb23-308" aria-hidden="true" tabindex="-1"></a><span class="co"># Join ACS data to block group boundaries and transform CRS</span></span>
<span id="cb23-309"><a href="#cb23-309" aria-hidden="true" tabindex="-1"></a>gdf_ut_income <span class="op">=</span> gdf_ut_bound[[<span class="st">'GEOID'</span>, <span class="st">'STATEFP'</span>, <span class="st">'NAME'</span>, <span class="st">'geometry'</span>]].merge(</span>
<span id="cb23-310"><a href="#cb23-310" aria-hidden="true" tabindex="-1"></a>    df_ut_income, on <span class="op">=</span> <span class="st">"GEOID"</span></span>
<span id="cb23-311"><a href="#cb23-311" aria-hidden="true" tabindex="-1"></a>).to_crs(PROJECT_CRS).rename(columns<span class="op">=</span>acs_variables)</span>
<span id="cb23-312"><a href="#cb23-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-313"><a href="#cb23-313" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview data</span></span>
<span id="cb23-314"><a href="#cb23-314" aria-hidden="true" tabindex="-1"></a>gdf_ut_income</span>
<span id="cb23-315"><a href="#cb23-315" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-316"><a href="#cb23-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-317"><a href="#cb23-317" aria-hidden="true" tabindex="-1"></a>**What we find:** Utah's median household income from the ACS provides the anchor point for all subsequent calculations. The distribution across income brackets shows the shape of Utah's income distribution, which typically differs from national patterns due to the state's unique demographic characteristics (larger household sizes, younger population, and specific economic structure).</span>
<span id="cb23-318"><a href="#cb23-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-319"><a href="#cb23-319" aria-hidden="true" tabindex="-1"></a><span class="fu">## Intermediate Calculations</span></span>
<span id="cb23-320"><a href="#cb23-320" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-321"><a href="#cb23-321" aria-hidden="true" tabindex="-1"></a>With raw data in hand, we now perform the intermediate calculations needed to derive VOT parameters. These steps transform income distributions into the specific metrics required by the travel demand model.</span>
<span id="cb23-322"><a href="#cb23-322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-323"><a href="#cb23-323" aria-hidden="true" tabindex="-1"></a><span class="fu">### Income Groupings (Approximate Income Quartiles)</span></span>
<span id="cb23-324"><a href="#cb23-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-325"><a href="#cb23-325" aria-hidden="true" tabindex="-1"></a>Travel demand models often segment travelers by income level because income strongly influences mode choice, route selection, and willingness to pay for time savings. Rather than using 16 separate income categories (which would create excessive model complexity), we aggregate households into four income groups approximating quartiles.</span>
<span id="cb23-326"><a href="#cb23-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-327"><a href="#cb23-327" aria-hidden="true" tabindex="-1"></a>The quartile approach ensures that each income group contains roughly 25% of households, providing balanced sample sizes for model estimation. However, because ACS income brackets don't align perfectly with quartile boundaries, we assign entire brackets to the quartile they predominantly fall within.</span>
<span id="cb23-328"><a href="#cb23-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-329"><a href="#cb23-329" aria-hidden="true" tabindex="-1"></a>**Income Group 1 (Low Income)**: The first quartile of households by income. This group typically has the lowest VOT because they face tighter budget constraints and may be more willing to spend time to save money.</span>
<span id="cb23-330"><a href="#cb23-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-331"><a href="#cb23-331" aria-hidden="true" tabindex="-1"></a>**Income Groups 2-4 (Higher Income)**: The upper three quartiles, which we sometimes aggregate as "high income" in contrast to the lowest quartile. These households generally have higher VOT because their opportunity cost of time is greater.</span>
<span id="cb23-332"><a href="#cb23-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-335"><a href="#cb23-335" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-336"><a href="#cb23-336" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a copy of lookup table to work with</span></span>
<span id="cb23-337"><a href="#cb23-337" aria-hidden="true" tabindex="-1"></a>df_inc_group <span class="op">=</span> lookup_hhinc.copy()</span>
<span id="cb23-338"><a href="#cb23-338" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-339"><a href="#cb23-339" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the income category columns from gdf_ut_income</span></span>
<span id="cb23-340"><a href="#cb23-340" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract just the income bracket counts (excluding totals and medians)</span></span>
<span id="cb23-341"><a href="#cb23-341" aria-hidden="true" tabindex="-1"></a>income_cols <span class="op">=</span> [col <span class="cf">for</span> col <span class="kw">in</span> gdf_ut_income.columns <span class="cf">if</span> col.startswith(<span class="st">'HH_'</span>)</span>
<span id="cb23-342"><a href="#cb23-342" aria-hidden="true" tabindex="-1"></a>               <span class="kw">and</span> col <span class="kw">not</span> <span class="kw">in</span> [<span class="st">'HH_TOTAL'</span>, <span class="st">'HH_MED_INC'</span>, <span class="st">'HH_MED_INC_MOE'</span>]]</span>
<span id="cb23-343"><a href="#cb23-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-344"><a href="#cb23-344" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a mapping between lookup categories and gdf_ut_income columns</span></span>
<span id="cb23-345"><a href="#cb23-345" aria-hidden="true" tabindex="-1"></a><span class="co"># They should already match, but let's be explicit</span></span>
<span id="cb23-346"><a href="#cb23-346" aria-hidden="true" tabindex="-1"></a>df_inc_group[<span class="st">'State HH'</span>] <span class="op">=</span> df_inc_group[<span class="st">'Income Category'</span>].<span class="bu">map</span>(</span>
<span id="cb23-347"><a href="#cb23-347" aria-hidden="true" tabindex="-1"></a>    gdf_ut_income[income_cols].iloc[<span class="dv">0</span>].to_dict()</span>
<span id="cb23-348"><a href="#cb23-348" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-349"><a href="#cb23-349" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-350"><a href="#cb23-350" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate percentage of households</span></span>
<span id="cb23-351"><a href="#cb23-351" aria-hidden="true" tabindex="-1"></a>total_hh <span class="op">=</span> df_inc_group[<span class="st">'State HH'</span>].<span class="bu">sum</span>()</span>
<span id="cb23-352"><a href="#cb23-352" aria-hidden="true" tabindex="-1"></a>df_inc_group[<span class="st">'% HH'</span>] <span class="op">=</span> (df_inc_group[<span class="st">'State HH'</span>] <span class="op">/</span> total_hh <span class="op">*</span> <span class="dv">100</span>).<span class="bu">round</span>(<span class="dv">1</span>)</span>
<span id="cb23-353"><a href="#cb23-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-354"><a href="#cb23-354" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate cumulative percentage</span></span>
<span id="cb23-355"><a href="#cb23-355" aria-hidden="true" tabindex="-1"></a>df_inc_group[<span class="st">'Cum % HH'</span>] <span class="op">=</span> df_inc_group[<span class="st">'% HH'</span>].cumsum().<span class="bu">round</span>(<span class="dv">1</span>)</span>
<span id="cb23-356"><a href="#cb23-356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-357"><a href="#cb23-357" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign income groups based on quartiles (25%, 50%, 75%, 100%)</span></span>
<span id="cb23-358"><a href="#cb23-358" aria-hidden="true" tabindex="-1"></a>df_inc_group[<span class="st">'Inc Group'</span>] <span class="op">=</span> pd.cut(</span>
<span id="cb23-359"><a href="#cb23-359" aria-hidden="true" tabindex="-1"></a>    df_inc_group[<span class="st">'Cum % HH'</span>],</span>
<span id="cb23-360"><a href="#cb23-360" aria-hidden="true" tabindex="-1"></a>    bins<span class="op">=</span>[<span class="dv">0</span>, <span class="dv">25</span>, <span class="dv">50</span>, <span class="dv">75</span>, <span class="dv">100</span>],</span>
<span id="cb23-361"><a href="#cb23-361" aria-hidden="true" tabindex="-1"></a>    labels<span class="op">=</span>[<span class="st">'Inc Group 1'</span>, <span class="st">'Inc Group 2'</span>, <span class="st">'Inc Group 3'</span>, <span class="st">'Inc Group 4'</span>],</span>
<span id="cb23-362"><a href="#cb23-362" aria-hidden="true" tabindex="-1"></a>    include_lowest<span class="op">=</span><span class="va">True</span></span>
<span id="cb23-363"><a href="#cb23-363" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-364"><a href="#cb23-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-365"><a href="#cb23-365" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate HH_MedInc_Product (HH * Midpoint)</span></span>
<span id="cb23-366"><a href="#cb23-366" aria-hidden="true" tabindex="-1"></a>df_inc_group[<span class="st">'HH_MedInc_Product'</span>] <span class="op">=</span> df_inc_group[<span class="st">'State HH'</span>] <span class="op">*</span> df_inc_group[<span class="st">'Midpoint'</span>]</span>
<span id="cb23-367"><a href="#cb23-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-368"><a href="#cb23-368" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the dataframe</span></span>
<span id="cb23-369"><a href="#cb23-369" aria-hidden="true" tabindex="-1"></a>df_inc_group</span>
<span id="cb23-370"><a href="#cb23-370" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-371"><a href="#cb23-371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-372"><a href="#cb23-372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-375"><a href="#cb23-375" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-376"><a href="#cb23-376" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Household Income Distribution by Quartile"</span></span>
<span id="cb23-377"><a href="#cb23-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-378"><a href="#cb23-378" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare data for seaborn</span></span>
<span id="cb23-379"><a href="#cb23-379" aria-hidden="true" tabindex="-1"></a>df_plot <span class="op">=</span> df_inc_group.copy()</span>
<span id="cb23-380"><a href="#cb23-380" aria-hidden="true" tabindex="-1"></a>df_plot[<span class="st">'Income Label'</span>] <span class="op">=</span> df_plot[<span class="st">'Income Category'</span>].<span class="bu">str</span>.replace(<span class="st">'HH_'</span>, <span class="st">''</span>).<span class="bu">str</span>.replace(<span class="st">'_'</span>, <span class="st">' - '</span>)</span>
<span id="cb23-381"><a href="#cb23-381" aria-hidden="true" tabindex="-1"></a>df_plot[<span class="st">'index'</span>] <span class="op">=</span> <span class="bu">range</span>(<span class="bu">len</span>(df_plot))</span>
<span id="cb23-382"><a href="#cb23-382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-383"><a href="#cb23-383" aria-hidden="true" tabindex="-1"></a><span class="co"># Define colors for each income group</span></span>
<span id="cb23-384"><a href="#cb23-384" aria-hidden="true" tabindex="-1"></a>palette <span class="op">=</span> {<span class="st">'Inc Group 1'</span>: <span class="st">'#3498db'</span>, <span class="st">'Inc Group 2'</span>: <span class="st">'#2ecc71'</span>,</span>
<span id="cb23-385"><a href="#cb23-385" aria-hidden="true" tabindex="-1"></a>           <span class="st">'Inc Group 3'</span>: <span class="st">'#f39c12'</span>, <span class="st">'Inc Group 4'</span>: <span class="st">'#e74c3c'</span>}</span>
<span id="cb23-386"><a href="#cb23-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-387"><a href="#cb23-387" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seaborn style and context</span></span>
<span id="cb23-388"><a href="#cb23-388" aria-hidden="true" tabindex="-1"></a>sns.set_style(<span class="st">"whitegrid"</span>)</span>
<span id="cb23-389"><a href="#cb23-389" aria-hidden="true" tabindex="-1"></a>sns.set_context(<span class="st">"notebook"</span>)</span>
<span id="cb23-390"><a href="#cb23-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-391"><a href="#cb23-391" aria-hidden="true" tabindex="-1"></a><span class="co"># Create barplot using seaborn</span></span>
<span id="cb23-392"><a href="#cb23-392" aria-hidden="true" tabindex="-1"></a><span class="co"># plt.figure(figsize=(12, 6))</span></span>
<span id="cb23-393"><a href="#cb23-393" aria-hidden="true" tabindex="-1"></a>sns.barplot(</span>
<span id="cb23-394"><a href="#cb23-394" aria-hidden="true" tabindex="-1"></a>    data<span class="op">=</span>df_plot,</span>
<span id="cb23-395"><a href="#cb23-395" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="st">'index'</span>,</span>
<span id="cb23-396"><a href="#cb23-396" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="st">'State HH'</span>,</span>
<span id="cb23-397"><a href="#cb23-397" aria-hidden="true" tabindex="-1"></a>    hue<span class="op">=</span><span class="st">'Inc Group'</span>,</span>
<span id="cb23-398"><a href="#cb23-398" aria-hidden="true" tabindex="-1"></a>    palette<span class="op">=</span>palette,</span>
<span id="cb23-399"><a href="#cb23-399" aria-hidden="true" tabindex="-1"></a>    legend<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb23-400"><a href="#cb23-400" aria-hidden="true" tabindex="-1"></a>    dodge<span class="op">=</span><span class="va">False</span></span>
<span id="cb23-401"><a href="#cb23-401" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-402"><a href="#cb23-402" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-403"><a href="#cb23-403" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize plot</span></span>
<span id="cb23-404"><a href="#cb23-404" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Income Category'</span>, fontsize<span class="op">=</span><span class="dv">11</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb23-405"><a href="#cb23-405" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Number of Households'</span>, fontsize<span class="op">=</span><span class="dv">11</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb23-406"><a href="#cb23-406" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Utah Household Income Distribution by Quartile'</span>,</span>
<span id="cb23-407"><a href="#cb23-407" aria-hidden="true" tabindex="-1"></a>          fontsize<span class="op">=</span><span class="dv">13</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>, pad<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb23-408"><a href="#cb23-408" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-409"><a href="#cb23-409" aria-hidden="true" tabindex="-1"></a><span class="co"># Format y-axis with comma separator</span></span>
<span id="cb23-410"><a href="#cb23-410" aria-hidden="true" tabindex="-1"></a>plt.gca().yaxis.set_major_formatter(ticker.FuncFormatter(<span class="kw">lambda</span> x, p: <span class="ss">f'</span><span class="sc">{</span>x<span class="sc">:,.0f}</span><span class="ss">'</span>))</span>
<span id="cb23-411"><a href="#cb23-411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-412"><a href="#cb23-412" aria-hidden="true" tabindex="-1"></a><span class="co"># Set x-axis labels</span></span>
<span id="cb23-413"><a href="#cb23-413" aria-hidden="true" tabindex="-1"></a>plt.xticks(<span class="bu">range</span>(<span class="bu">len</span>(df_plot)), df_plot[<span class="st">'Income Label'</span>],</span>
<span id="cb23-414"><a href="#cb23-414" aria-hidden="true" tabindex="-1"></a>           rotation<span class="op">=</span><span class="dv">45</span>, ha<span class="op">=</span><span class="st">'right'</span>, fontsize<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb23-415"><a href="#cb23-415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-416"><a href="#cb23-416" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize legend</span></span>
<span id="cb23-417"><a href="#cb23-417" aria-hidden="true" tabindex="-1"></a>plt.legend(loc<span class="op">=</span><span class="st">'upper left'</span>, frameon<span class="op">=</span><span class="va">True</span>, fontsize<span class="op">=</span><span class="dv">10</span>, title<span class="op">=</span><span class="st">''</span>)</span>
<span id="cb23-418"><a href="#cb23-418" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-419"><a href="#cb23-419" aria-hidden="true" tabindex="-1"></a><span class="co"># Grid styling</span></span>
<span id="cb23-420"><a href="#cb23-420" aria-hidden="true" tabindex="-1"></a>plt.grid(axis<span class="op">=</span><span class="st">'y'</span>, alpha<span class="op">=</span><span class="fl">0.3</span>, linestyle<span class="op">=</span><span class="st">'--'</span>)</span>
<span id="cb23-421"><a href="#cb23-421" aria-hidden="true" tabindex="-1"></a>plt.gca().set_axisbelow(<span class="va">True</span>)</span>
<span id="cb23-422"><a href="#cb23-422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-423"><a href="#cb23-423" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove top and right spines for cleaner look</span></span>
<span id="cb23-424"><a href="#cb23-424" aria-hidden="true" tabindex="-1"></a>sns.despine()</span>
<span id="cb23-425"><a href="#cb23-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-426"><a href="#cb23-426" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb23-427"><a href="#cb23-427" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb23-428"><a href="#cb23-428" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-429"><a href="#cb23-429" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-430"><a href="#cb23-430" aria-hidden="true" tabindex="-1"></a>**What we find:** The visualization reveals Utah's income distribution shape. We see a concentration of households in middle-income brackets with smaller tails at the lower extreme. This indicates a relatively strong middle class. The quartile assignments allow us to create a simplified four-group segmentation suitable for model implementation while preserving the essential income-based variation in time values.</span>
<span id="cb23-431"><a href="#cb23-431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-432"><a href="#cb23-432" aria-hidden="true" tabindex="-1"></a><span class="fu">### Median Income (in Model Base Year Dollars)</span></span>
<span id="cb23-433"><a href="#cb23-433" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-434"><a href="#cb23-434" aria-hidden="true" tabindex="-1"></a>To calculate VOT, we need a single representative income value for each income segment. The median is preferable to the mean because it's less sensitive to extreme values and better represents the "typical" household in each group.</span>
<span id="cb23-435"><a href="#cb23-435" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-436"><a href="#cb23-436" aria-hidden="true" tabindex="-1"></a>We calculate medians using two approaches:</span>
<span id="cb23-437"><a href="#cb23-437" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-438"><a href="#cb23-438" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>**Weighted average of bracket midpoints**: Using our lookup table midpoints and household counts</span>
<span id="cb23-439"><a href="#cb23-439" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>**ACS-reported median**: The direct estimate from Table B19013</span>
<span id="cb23-440"><a href="#cb23-440" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-441"><a href="#cb23-441" aria-hidden="true" tabindex="-1"></a>The weighted average approach typically produces a value slightly different from the ACS median due to our simplified midpoint assumptions. We calculate a correction factor to align our estimates with the official ACS median for the full population, then apply this same correction proportionally to the income group medians. This ensures internal consistency while respecting the authoritative ACS estimates.</span>
<span id="cb23-442"><a href="#cb23-442" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-445"><a href="#cb23-445" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-446"><a href="#cb23-446" aria-hidden="true" tabindex="-1"></a><span class="co"># Define income categories</span></span>
<span id="cb23-447"><a href="#cb23-447" aria-hidden="true" tabindex="-1"></a>categories <span class="op">=</span> {</span>
<span id="cb23-448"><a href="#cb23-448" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Average'</span>: df_inc_group,</span>
<span id="cb23-449"><a href="#cb23-449" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Low Inc'</span>: df_inc_group[df_inc_group[<span class="st">'Inc Group'</span>] <span class="op">==</span> <span class="st">'Inc Group 1'</span>],</span>
<span id="cb23-450"><a href="#cb23-450" aria-hidden="true" tabindex="-1"></a>    <span class="st">'High Inc'</span>: df_inc_group[df_inc_group[<span class="st">'Inc Group'</span>] <span class="op">!=</span> <span class="st">'Inc Group 1'</span>]</span>
<span id="cb23-451"><a href="#cb23-451" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb23-452"><a href="#cb23-452" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-453"><a href="#cb23-453" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate metrics for each category</span></span>
<span id="cb23-454"><a href="#cb23-454" aria-hidden="true" tabindex="-1"></a>summary_data <span class="op">=</span> {}</span>
<span id="cb23-455"><a href="#cb23-455" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> cat_name, cat_df <span class="kw">in</span> categories.items():</span>
<span id="cb23-456"><a href="#cb23-456" aria-hidden="true" tabindex="-1"></a>    summary_data[cat_name] <span class="op">=</span> {</span>
<span id="cb23-457"><a href="#cb23-457" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Sum HH'</span>: cat_df[<span class="st">'State HH'</span>].<span class="bu">sum</span>(),</span>
<span id="cb23-458"><a href="#cb23-458" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Sum HH * Inc'</span>: cat_df[<span class="st">'HH_MedInc_Product'</span>].<span class="bu">sum</span>(),</span>
<span id="cb23-459"><a href="#cb23-459" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb23-460"><a href="#cb23-460" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate unadjusted median income</span></span>
<span id="cb23-461"><a href="#cb23-461" aria-hidden="true" tabindex="-1"></a>    summary_data[cat_name][<span class="st">'Unadj Med Inc'</span>] <span class="op">=</span> (</span>
<span id="cb23-462"><a href="#cb23-462" aria-hidden="true" tabindex="-1"></a>        summary_data[cat_name][<span class="st">'Sum HH * Inc'</span>] <span class="op">/</span> summary_data[cat_name][<span class="st">'Sum HH'</span>]</span>
<span id="cb23-463"><a href="#cb23-463" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb23-464"><a href="#cb23-464" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-465"><a href="#cb23-465" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate correction factor from Average category</span></span>
<span id="cb23-466"><a href="#cb23-466" aria-hidden="true" tabindex="-1"></a>actual_median_income <span class="op">=</span> gdf_ut_income[<span class="st">'HH_MED_INC'</span>].iloc[<span class="dv">0</span>]</span>
<span id="cb23-467"><a href="#cb23-467" aria-hidden="true" tabindex="-1"></a>correction_factor <span class="op">=</span> actual_median_income <span class="op">/</span> summary_data[<span class="st">'Average'</span>][<span class="st">'Unadj Med Inc'</span>]</span>
<span id="cb23-468"><a href="#cb23-468" aria-hidden="true" tabindex="-1"></a>inflation_factor <span class="op">=</span> <span class="fl">1.0</span></span>
<span id="cb23-469"><a href="#cb23-469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-470"><a href="#cb23-470" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply correction and inflation factors</span></span>
<span id="cb23-471"><a href="#cb23-471" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> cat_name <span class="kw">in</span> summary_data:</span>
<span id="cb23-472"><a href="#cb23-472" aria-hidden="true" tabindex="-1"></a>    summary_data[cat_name][<span class="st">'Correction Factor'</span>] <span class="op">=</span> correction_factor</span>
<span id="cb23-473"><a href="#cb23-473" aria-hidden="true" tabindex="-1"></a>    summary_data[cat_name][<span class="st">'Adj Med Income'</span>] <span class="op">=</span> (</span>
<span id="cb23-474"><a href="#cb23-474" aria-hidden="true" tabindex="-1"></a>        summary_data[cat_name][<span class="st">'Unadj Med Inc'</span>] <span class="op">*</span> correction_factor</span>
<span id="cb23-475"><a href="#cb23-475" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb23-476"><a href="#cb23-476" aria-hidden="true" tabindex="-1"></a>    summary_data[cat_name][<span class="st">'Inflation Adj Factor'</span>] <span class="op">=</span> inflation_factor</span>
<span id="cb23-477"><a href="#cb23-477" aria-hidden="true" tabindex="-1"></a>    summary_data[cat_name][<span class="st">'Median Income'</span>] <span class="op">=</span> (</span>
<span id="cb23-478"><a href="#cb23-478" aria-hidden="true" tabindex="-1"></a>        summary_data[cat_name][<span class="st">'Adj Med Income'</span>] <span class="op">*</span> inflation_factor</span>
<span id="cb23-479"><a href="#cb23-479" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb23-480"><a href="#cb23-480" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-481"><a href="#cb23-481" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to DataFrame</span></span>
<span id="cb23-482"><a href="#cb23-482" aria-hidden="true" tabindex="-1"></a>df_summary <span class="op">=</span> pd.DataFrame(summary_data).T</span>
<span id="cb23-483"><a href="#cb23-483" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-484"><a href="#cb23-484" aria-hidden="true" tabindex="-1"></a><span class="co"># Format for display</span></span>
<span id="cb23-485"><a href="#cb23-485" aria-hidden="true" tabindex="-1"></a>format_specs <span class="op">=</span> {</span>
<span id="cb23-486"><a href="#cb23-486" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Sum HH'</span>: <span class="st">'</span><span class="sc">{:,.0f}</span><span class="st">'</span>,</span>
<span id="cb23-487"><a href="#cb23-487" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Sum HH * Inc'</span>: <span class="st">'</span><span class="sc">{:,.0f}</span><span class="st">'</span>,</span>
<span id="cb23-488"><a href="#cb23-488" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Unadj Med Inc'</span>: <span class="st">'$</span><span class="sc">{:,.0f}</span><span class="st">'</span>,</span>
<span id="cb23-489"><a href="#cb23-489" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Correction Factor'</span>: <span class="st">'</span><span class="sc">{:.4f}</span><span class="st">'</span>,</span>
<span id="cb23-490"><a href="#cb23-490" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Adj Med Income'</span>: <span class="st">'$</span><span class="sc">{:,.0f}</span><span class="st">'</span>,</span>
<span id="cb23-491"><a href="#cb23-491" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Inflation Adj Factor'</span>: <span class="st">'</span><span class="sc">{:.4f}</span><span class="st">'</span>,</span>
<span id="cb23-492"><a href="#cb23-492" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Median Income'</span>: <span class="st">'$</span><span class="sc">{:,.0f}</span><span class="st">'</span></span>
<span id="cb23-493"><a href="#cb23-493" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb23-494"><a href="#cb23-494" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-495"><a href="#cb23-495" aria-hidden="true" tabindex="-1"></a>df_median_income <span class="op">=</span> df_summary.copy()</span>
<span id="cb23-496"><a href="#cb23-496" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col, fmt <span class="kw">in</span> format_specs.items():</span>
<span id="cb23-497"><a href="#cb23-497" aria-hidden="true" tabindex="-1"></a>    df_median_income[col] <span class="op">=</span> df_summary[col].<span class="bu">apply</span>(<span class="kw">lambda</span> x: fmt.<span class="bu">format</span>(x))</span>
<span id="cb23-498"><a href="#cb23-498" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-499"><a href="#cb23-499" aria-hidden="true" tabindex="-1"></a>df_median_income</span>
<span id="cb23-500"><a href="#cb23-500" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-501"><a href="#cb23-501" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-502"><a href="#cb23-502" aria-hidden="true" tabindex="-1"></a>**What we find:**</span>
<span id="cb23-503"><a href="#cb23-503" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-504"><a href="#cb23-504" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Average Median Income**: The overall median for all Utah households, matching the ACS B19013 estimate</span>
<span id="cb23-505"><a href="#cb23-505" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Low Income Median**: The median for the bottom quartile, representing lower-wage workers, retirees on fixed incomes, and households with part-time employment</span>
<span id="cb23-506"><a href="#cb23-506" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**High Income Median**: The median for the upper three quartiles combined, representing professional workers, dual-income households, and higher-wage earners</span>
<span id="cb23-507"><a href="#cb23-507" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-508"><a href="#cb23-508" aria-hidden="true" tabindex="-1"></a>These three values form the foundation for calculating income-differentiated VOT parameters.</span>
<span id="cb23-509"><a href="#cb23-509" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-510"><a href="#cb23-510" aria-hidden="true" tabindex="-1"></a><span class="fu">### Value of Time (in Model Base Year Dollars)</span></span>
<span id="cb23-511"><a href="#cb23-511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-512"><a href="#cb23-512" aria-hidden="true" tabindex="-1"></a>The Value of Time converts annual income into an hourly rate, then applies purpose-specific multipliers to reflect how travelers trade off time and money for different trip types. The fundamental assumption is that VOT relates to income—higher earners value time more—but the relationship isn't one-to-one.</span>
<span id="cb23-513"><a href="#cb23-513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-514"><a href="#cb23-514" aria-hidden="true" tabindex="-1"></a>Research from revealed preference studies (toll usage patterns) and stated preference surveys consistently shows that:</span>
<span id="cb23-515"><a href="#cb23-515" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-516"><a href="#cb23-516" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>People value work trip time at 35-50% of their wage rate (employers care about productivity, commuters care about stress and lost leisure)</span>
<span id="cb23-517"><a href="#cb23-517" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>People value personal trip time at 25-35% of their wage rate (pure leisure trade-off)</span>
<span id="cb23-518"><a href="#cb23-518" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Commercial vehicles have higher VOT reflecting business operating costs beyond driver wages</span>
<span id="cb23-519"><a href="#cb23-519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-520"><a href="#cb23-520" aria-hidden="true" tabindex="-1"></a>The percentages we apply come from regional travel behavior studies, calibrated to match observed patterns in toll lane usage, route choice, and mode choice behavior.</span>
<span id="cb23-521"><a href="#cb23-521" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-522"><a href="#cb23-522" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Calculate Hourly Income</span></span>
<span id="cb23-523"><a href="#cb23-523" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-524"><a href="#cb23-524" aria-hidden="true" tabindex="-1"></a>We convert annual median income to an hourly rate by dividing by 2,080 hours (52 weeks × 40 hours/week). This assumes full-time, year-round employment, which is a standard convention in VOT estimation. While not every household member works full-time, this standardization allows consistent comparison across income groups and aligns with how wages are typically expressed.</span>
<span id="cb23-525"><a href="#cb23-525" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-528"><a href="#cb23-528" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-529"><a href="#cb23-529" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert annual median income to hourly rate (assuming 2080 work hours/year)</span></span>
<span id="cb23-530"><a href="#cb23-530" aria-hidden="true" tabindex="-1"></a>df_hourly <span class="op">=</span> pd.DataFrame({</span>
<span id="cb23-531"><a href="#cb23-531" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Median Income'</span>: df_summary[<span class="st">'Median Income'</span>],</span>
<span id="cb23-532"><a href="#cb23-532" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Hourly Rate'</span>: df_summary[<span class="st">'Median Income'</span>] <span class="op">/</span> <span class="dv">2080</span></span>
<span id="cb23-533"><a href="#cb23-533" aria-hidden="true" tabindex="-1"></a>}, index<span class="op">=</span>[<span class="st">'Average'</span>, <span class="st">'Low Inc'</span>, <span class="st">'High Inc'</span>])</span>
<span id="cb23-534"><a href="#cb23-534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-535"><a href="#cb23-535" aria-hidden="true" tabindex="-1"></a>df_hourly.style.<span class="bu">format</span>({</span>
<span id="cb23-536"><a href="#cb23-536" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Median Income'</span>: <span class="st">'$</span><span class="sc">{:,.0f}</span><span class="st">'</span>,</span>
<span id="cb23-537"><a href="#cb23-537" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Hourly Rate'</span>: <span class="st">'$</span><span class="sc">{:.2f}</span><span class="st">'</span></span>
<span id="cb23-538"><a href="#cb23-538" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb23-539"><a href="#cb23-539" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-540"><a href="#cb23-540" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-541"><a href="#cb23-541" aria-hidden="true" tabindex="-1"></a>**What we find:** The hourly rates provide an intuitive way to think about the opportunity cost of time. For example, if the average household has an hourly rate of \$45, spending an hour in traffic has a notional cost of \$45 in lost productive time or leisure.</span>
<span id="cb23-542"><a href="#cb23-542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-543"><a href="#cb23-543" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Calculate VOT in cents per mile</span></span>
<span id="cb23-544"><a href="#cb23-544" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-545"><a href="#cb23-545" aria-hidden="true" tabindex="-1"></a>These hardcoded percentages represent the fraction of hourly wage that travelers implicitly value their travel time at, based on observed behavior in previous studies. The percentages differ by trip purpose because:</span>
<span id="cb23-546"><a href="#cb23-546" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-547"><a href="#cb23-547" aria-hidden="true" tabindex="-1"></a>**Work Trips (higher %)**: Include both the opportunity cost to the traveler AND the employer's interest in worker productivity. However, it's typically less than 100% of the wage because commute time is partially compensated through location choice (people choose home/work locations balancing commute time against housing costs and wages).</span>
<span id="cb23-548"><a href="#cb23-548" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-549"><a href="#cb23-549" aria-hidden="true" tabindex="-1"></a>**Personal Trips (lower %)**: Reflect pure leisure time trade-offs. People are willing to spend more time traveling when they have flexibility and the marginal utility of saved time is lower.</span>
<span id="cb23-550"><a href="#cb23-550" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-551"><a href="#cb23-551" aria-hidden="true" tabindex="-1"></a>**Income Effects**: Lower-income travelers often show higher VOT as a percentage of income for work trips (they can't afford to be late) but lower for personal trips (more time-flexible). Higher-income travelers show the opposite pattern.</span>
<span id="cb23-552"><a href="#cb23-552" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-553"><a href="#cb23-553" aria-hidden="true" tabindex="-1"></a>These percentages have been calibrated in previous model validation efforts to match observed behavior patterns in the region.</span>
<span id="cb23-554"><a href="#cb23-554" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-557"><a href="#cb23-557" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-558"><a href="#cb23-558" aria-hidden="true" tabindex="-1"></a><span class="co"># Define VOT as percentage of hourly income for each trip purpose and income group</span></span>
<span id="cb23-559"><a href="#cb23-559" aria-hidden="true" tabindex="-1"></a><span class="co"># Hardcoded VOT percentages from previous calculations</span></span>
<span id="cb23-560"><a href="#cb23-560" aria-hidden="true" tabindex="-1"></a>vot_pct <span class="op">=</span> pd.DataFrame({</span>
<span id="cb23-561"><a href="#cb23-561" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Work'</span>: [<span class="fl">0.39</span>, <span class="fl">0.62</span>, <span class="fl">0.34</span>],</span>
<span id="cb23-562"><a href="#cb23-562" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Personal'</span>: [<span class="fl">0.30</span>, <span class="fl">0.49</span>, <span class="fl">0.27</span>]</span>
<span id="cb23-563"><a href="#cb23-563" aria-hidden="true" tabindex="-1"></a>}, index<span class="op">=</span>[<span class="st">'Average'</span>, <span class="st">'Low Inc'</span>, <span class="st">'High Inc'</span>])</span>
<span id="cb23-564"><a href="#cb23-564" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-565"><a href="#cb23-565" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-568"><a href="#cb23-568" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-569"><a href="#cb23-569" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate VOT in cents per minute (hourly rate * percentage * 100 / 60)</span></span>
<span id="cb23-570"><a href="#cb23-570" aria-hidden="true" tabindex="-1"></a>vot_cents_min <span class="op">=</span> ((df_hourly[<span class="st">'Hourly Rate'</span>].values[:, <span class="va">None</span>] <span class="op">*</span> vot_pct) <span class="op">*</span> <span class="dv">100</span> <span class="op">/</span> <span class="dv">60</span>).<span class="bu">round</span>(<span class="dv">0</span>)</span>
<span id="cb23-571"><a href="#cb23-571" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-572"><a href="#cb23-572" aria-hidden="true" tabindex="-1"></a>vot_cents_min.style.<span class="bu">format</span>({</span>
<span id="cb23-573"><a href="#cb23-573" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Work'</span>: <span class="st">'$</span><span class="sc">{:.1f}</span><span class="st">'</span>,</span>
<span id="cb23-574"><a href="#cb23-574" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Personal'</span>: <span class="st">'$</span><span class="sc">{:.1f}</span><span class="st">'</span></span>
<span id="cb23-575"><a href="#cb23-575" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb23-576"><a href="#cb23-576" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-577"><a href="#cb23-577" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-578"><a href="#cb23-578" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Calculate and Display Work &amp; Personal VOT</span></span>
<span id="cb23-579"><a href="#cb23-579" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-580"><a href="#cb23-580" aria-hidden="true" tabindex="-1"></a>We now calculate the final VOT values in cents per minute, the standard unit for travel demand models. The conversion from dollars per hour to cents per minute (multiplying by 100, dividing by 60) makes the values easier to work with in network assignment algorithms where travel times are typically in minutes.</span>
<span id="cb23-581"><a href="#cb23-581" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-582"><a href="#cb23-582" aria-hidden="true" tabindex="-1"></a>**Work VOT Results:**</span>
<span id="cb23-583"><a href="#cb23-583" aria-hidden="true" tabindex="-1"></a>These values represent how much travelers implicitly pay (in toll charges, fuel costs, or inconvenience) to save one minute of travel time on work-related trips. Higher-income travelers have higher work VOT, reflecting both their higher opportunity cost and their greater ability to pay for time savings.</span>
<span id="cb23-584"><a href="#cb23-584" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-587"><a href="#cb23-587" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-588"><a href="#cb23-588" aria-hidden="true" tabindex="-1"></a><span class="co"># Display Work VOT results</span></span>
<span id="cb23-589"><a href="#cb23-589" aria-hidden="true" tabindex="-1"></a>df_vot_work <span class="op">=</span> pd.DataFrame({</span>
<span id="cb23-590"><a href="#cb23-590" aria-hidden="true" tabindex="-1"></a>    <span class="st">'</span><span class="sc">% o</span><span class="st">f Income'</span>: vot_pct[<span class="st">'Work'</span>],</span>
<span id="cb23-591"><a href="#cb23-591" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Unrounded ($/hr)'</span>: df_hourly[<span class="st">'Hourly Rate'</span>] <span class="op">*</span> vot_pct[<span class="st">'Work'</span>],</span>
<span id="cb23-592"><a href="#cb23-592" aria-hidden="true" tabindex="-1"></a>    <span class="st">'VOT (¢/min)'</span>: vot_cents_min[<span class="st">'Work'</span>],</span>
<span id="cb23-593"><a href="#cb23-593" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Equivalent ($/hr)'</span>: vot_cents_min[<span class="st">'Work'</span>] <span class="op">*</span> <span class="dv">60</span> <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb23-594"><a href="#cb23-594" aria-hidden="true" tabindex="-1"></a>}, index<span class="op">=</span>[<span class="st">'Average'</span>, <span class="st">'Low Inc'</span>, <span class="st">'High Inc'</span>])</span>
<span id="cb23-595"><a href="#cb23-595" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-596"><a href="#cb23-596" aria-hidden="true" tabindex="-1"></a>df_vot_work.style.<span class="bu">format</span>({</span>
<span id="cb23-597"><a href="#cb23-597" aria-hidden="true" tabindex="-1"></a>    <span class="st">'</span><span class="sc">% o</span><span class="st">f Income'</span>: <span class="st">'</span><span class="sc">{:.0%}</span><span class="st">'</span>,</span>
<span id="cb23-598"><a href="#cb23-598" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Unrounded ($/hr)'</span>: <span class="st">'$</span><span class="sc">{:.2f}</span><span class="st">'</span>,</span>
<span id="cb23-599"><a href="#cb23-599" aria-hidden="true" tabindex="-1"></a>    <span class="st">'VOT (¢/min)'</span>: <span class="st">'</span><span class="sc">{:.0f}</span><span class="st">'</span>,</span>
<span id="cb23-600"><a href="#cb23-600" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Equivalent ($/hr)'</span>: <span class="st">'$</span><span class="sc">{:.2f}</span><span class="st">'</span></span>
<span id="cb23-601"><a href="#cb23-601" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb23-602"><a href="#cb23-602" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-603"><a href="#cb23-603" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-604"><a href="#cb23-604" aria-hidden="true" tabindex="-1"></a>**Personal VOT Results:**</span>
<span id="cb23-605"><a href="#cb23-605" aria-hidden="true" tabindex="-1"></a>Personal trip VOT is consistently lower than work VOT across all income groups. The relative difference between income groups is also more pronounced, as higher-income households have more discretionary income to trade for leisure time convenience.</span>
<span id="cb23-606"><a href="#cb23-606" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-609"><a href="#cb23-609" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-610"><a href="#cb23-610" aria-hidden="true" tabindex="-1"></a><span class="co"># Display Personal VOT results</span></span>
<span id="cb23-611"><a href="#cb23-611" aria-hidden="true" tabindex="-1"></a>df_vot_personal <span class="op">=</span> pd.DataFrame({</span>
<span id="cb23-612"><a href="#cb23-612" aria-hidden="true" tabindex="-1"></a>    <span class="st">'</span><span class="sc">% o</span><span class="st">f Income'</span>: vot_pct[<span class="st">'Personal'</span>],</span>
<span id="cb23-613"><a href="#cb23-613" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Unrounded ($/hr)'</span>: df_hourly[<span class="st">'Hourly Rate'</span>] <span class="op">*</span> vot_pct[<span class="st">'Personal'</span>],</span>
<span id="cb23-614"><a href="#cb23-614" aria-hidden="true" tabindex="-1"></a>    <span class="st">'VOT (¢/min)'</span>: vot_cents_min[<span class="st">'Personal'</span>],</span>
<span id="cb23-615"><a href="#cb23-615" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Equivalent ($/hr)'</span>: vot_cents_min[<span class="st">'Personal'</span>] <span class="op">*</span> <span class="dv">60</span> <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb23-616"><a href="#cb23-616" aria-hidden="true" tabindex="-1"></a>}, index<span class="op">=</span>[<span class="st">'Average'</span>, <span class="st">'Low Inc'</span>, <span class="st">'High Inc'</span>])</span>
<span id="cb23-617"><a href="#cb23-617" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-618"><a href="#cb23-618" aria-hidden="true" tabindex="-1"></a>df_vot_personal.style.<span class="bu">format</span>({</span>
<span id="cb23-619"><a href="#cb23-619" aria-hidden="true" tabindex="-1"></a>    <span class="st">'</span><span class="sc">% o</span><span class="st">f Income'</span>: <span class="st">'</span><span class="sc">{:.0%}</span><span class="st">'</span>,</span>
<span id="cb23-620"><a href="#cb23-620" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Unrounded ($/hr)'</span>: <span class="st">'$</span><span class="sc">{:.2f}</span><span class="st">'</span>,</span>
<span id="cb23-621"><a href="#cb23-621" aria-hidden="true" tabindex="-1"></a>    <span class="st">'VOT (¢/min)'</span>: <span class="st">'</span><span class="sc">{:.0f}</span><span class="st">'</span>,</span>
<span id="cb23-622"><a href="#cb23-622" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Equivalent ($/hr)'</span>: <span class="st">'$</span><span class="sc">{:.2f}</span><span class="st">'</span></span>
<span id="cb23-623"><a href="#cb23-623" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb23-624"><a href="#cb23-624" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-625"><a href="#cb23-625" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-626"><a href="#cb23-626" aria-hidden="true" tabindex="-1"></a>**Model Application:** These VOT values feed directly into the mode choice and route choice components of the travel demand model. For example, if a toll road saves 10 minutes compared to a free alternative, a traveler will choose the toll road if the toll cost is less than (10 minutes × VOT). The model predicts what fraction of travelers find the trade-off worthwhile based on their income segment and trip purpose distribution.</span>
<span id="cb23-627"><a href="#cb23-627" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-628"><a href="#cb23-628" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Calculate and Display Truck VOT</span></span>
<span id="cb23-629"><a href="#cb23-629" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-630"><a href="#cb23-630" aria-hidden="true" tabindex="-1"></a>Commercial vehicle VOT requires a different framework than passenger vehicles because it reflects business operating costs rather than personal wage rates. Truck VOT includes:</span>
<span id="cb23-631"><a href="#cb23-631" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-632"><a href="#cb23-632" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Driver wages and benefits</span>
<span id="cb23-633"><a href="#cb23-633" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Vehicle operating costs (fuel, maintenance, depreciation)</span>
<span id="cb23-634"><a href="#cb23-634" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Cargo value and time-sensitivity</span>
<span id="cb23-635"><a href="#cb23-635" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Business overhead and profit margins</span>
<span id="cb23-636"><a href="#cb23-636" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-637"><a href="#cb23-637" aria-hidden="true" tabindex="-1"></a>The percentages (relative to average household income) are calibrated to match observed commercial vehicle behavior, particularly toll road usage patterns. Larger trucks have higher VOT because they carry more valuable cargo, have higher operating costs per hour, and typically serve time-sensitive delivery schedules.</span>
<span id="cb23-638"><a href="#cb23-638" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-639"><a href="#cb23-639" aria-hidden="true" tabindex="-1"></a>**Truck Categories:**</span>
<span id="cb23-640"><a href="#cb23-640" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-641"><a href="#cb23-641" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Light Trucks**: Small commercial vehicles, delivery vans, service vehicles</span>
<span id="cb23-642"><a href="#cb23-642" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Medium Trucks**: Box trucks, small semi-trailers, regional delivery vehicles</span>
<span id="cb23-643"><a href="#cb23-643" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Heavy Trucks**: Large semi-trailers, long-haul freight, bulk cargo carriers</span>
<span id="cb23-644"><a href="#cb23-644" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-647"><a href="#cb23-647" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-648"><a href="#cb23-648" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate Truck VOT (using Average income as base)</span></span>
<span id="cb23-649"><a href="#cb23-649" aria-hidden="true" tabindex="-1"></a><span class="co"># Hard coded percentages for truck types</span></span>
<span id="cb23-650"><a href="#cb23-650" aria-hidden="true" tabindex="-1"></a>truck_pct <span class="op">=</span> pd.Series([<span class="fl">0.65</span>, <span class="fl">0.87</span>, <span class="fl">1.10</span>], index<span class="op">=</span>[<span class="st">'Light'</span>, <span class="st">'Medium'</span>, <span class="st">'Heavy'</span>])</span>
<span id="cb23-651"><a href="#cb23-651" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-652"><a href="#cb23-652" aria-hidden="true" tabindex="-1"></a>df_vot_trucks <span class="op">=</span> pd.DataFrame({</span>
<span id="cb23-653"><a href="#cb23-653" aria-hidden="true" tabindex="-1"></a>    <span class="st">'</span><span class="sc">% o</span><span class="st">f Income'</span>: truck_pct,</span>
<span id="cb23-654"><a href="#cb23-654" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Unrounded ($/hr)'</span>: df_hourly.loc[<span class="st">'Average'</span>, <span class="st">'Hourly Rate'</span>] <span class="op">*</span> truck_pct,</span>
<span id="cb23-655"><a href="#cb23-655" aria-hidden="true" tabindex="-1"></a>    <span class="st">'VOT (¢/min)'</span>: ((df_hourly.loc[<span class="st">'Average'</span>, <span class="st">'Hourly Rate'</span>] <span class="op">*</span> truck_pct) <span class="op">*</span> <span class="dv">100</span> <span class="op">/</span> <span class="dv">60</span>).<span class="bu">round</span>(<span class="dv">0</span>)</span>
<span id="cb23-656"><a href="#cb23-656" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb23-657"><a href="#cb23-657" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-658"><a href="#cb23-658" aria-hidden="true" tabindex="-1"></a>df_vot_trucks[<span class="st">'Equivalent ($/hr)'</span>] <span class="op">=</span> df_vot_trucks[<span class="st">'VOT (¢/min)'</span>] <span class="op">*</span> <span class="dv">60</span> <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb23-659"><a href="#cb23-659" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-660"><a href="#cb23-660" aria-hidden="true" tabindex="-1"></a>df_vot_trucks.style.<span class="bu">format</span>({</span>
<span id="cb23-661"><a href="#cb23-661" aria-hidden="true" tabindex="-1"></a>    <span class="st">'</span><span class="sc">% o</span><span class="st">f Income'</span>: <span class="st">'</span><span class="sc">{:.0%}</span><span class="st">'</span>,</span>
<span id="cb23-662"><a href="#cb23-662" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Unrounded ($/hr)'</span>: <span class="st">'$</span><span class="sc">{:.2f}</span><span class="st">'</span>,</span>
<span id="cb23-663"><a href="#cb23-663" aria-hidden="true" tabindex="-1"></a>    <span class="st">'VOT (¢/min)'</span>: <span class="st">'</span><span class="sc">{:.0f}</span><span class="st">'</span>,</span>
<span id="cb23-664"><a href="#cb23-664" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Equivalent ($/hr)'</span>: <span class="st">'$</span><span class="sc">{:.2f}</span><span class="st">'</span></span>
<span id="cb23-665"><a href="#cb23-665" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb23-666"><a href="#cb23-666" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-667"><a href="#cb23-667" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-668"><a href="#cb23-668" aria-hidden="true" tabindex="-1"></a>**What we find:** Heavy truck VOT can exceed $30/hour, reflecting the high cost of keeping valuable cargo and expensive equipment idle in traffic. This high VOT explains why commercial vehicles disproportionately use toll facilities and why freight routing is highly sensitive to congestion and travel time reliability.</span>
<span id="cb23-669"><a href="#cb23-669" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-670"><a href="#cb23-670" aria-hidden="true" tabindex="-1"></a><span class="fu">## Export Results</span></span>
<span id="cb23-671"><a href="#cb23-671" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-672"><a href="#cb23-672" aria-hidden="true" tabindex="-1"></a>The final step packages our calculated VOT parameters in formats ready for model implementation and documentation.</span>
<span id="cb23-673"><a href="#cb23-673" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-674"><a href="#cb23-674" aria-hidden="true" tabindex="-1"></a><span class="fu">### Create Final VOT Table</span></span>
<span id="cb23-675"><a href="#cb23-675" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-676"><a href="#cb23-676" aria-hidden="true" tabindex="-1"></a>This table assembles all VOT parameters into a single reference dataset matching the travel demand model's naming conventions. Each parameter corresponds to a specific traveler type and trip purpose combination:</span>
<span id="cb23-677"><a href="#cb23-677" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-678"><a href="#cb23-678" aria-hidden="true" tabindex="-1"></a>**Parameter Definitions:**</span>
<span id="cb23-679"><a href="#cb23-679" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-680"><a href="#cb23-680" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**VOT_Auto_Wrk**: Standard work trip VOT (average income)</span>
<span id="cb23-681"><a href="#cb23-681" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**VOT_Auto_Per**: Standard personal trip VOT (average income)</span>
<span id="cb23-682"><a href="#cb23-682" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**VOT_Auto_Ext**: External trips (average of work and personal, used for through-trips)</span>
<span id="cb23-683"><a href="#cb23-683" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**VOT_LT, VOT_MD, VOT_HV**: Light, medium, and heavy truck VOT</span>
<span id="cb23-684"><a href="#cb23-684" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**VOT_Auto_Wrk_Lo, VOT_Auto_Per_Lo**: Low-income work and personal trip VOT</span>
<span id="cb23-685"><a href="#cb23-685" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**VOT_Auto_Wrk_Hi, VOT_Auto_Per_Hi**: High-income work and personal trip VOT</span>
<span id="cb23-686"><a href="#cb23-686" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-687"><a href="#cb23-687" aria-hidden="true" tabindex="-1"></a>The table displays values in both cents per minute (for model input) and dollars per hour (for intuitive interpretation).</span>
<span id="cb23-688"><a href="#cb23-688" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-691"><a href="#cb23-691" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-692"><a href="#cb23-692" aria-hidden="true" tabindex="-1"></a><span class="co"># Build the final VOT parameters table</span></span>
<span id="cb23-693"><a href="#cb23-693" aria-hidden="true" tabindex="-1"></a>df_vot_params <span class="op">=</span> pd.DataFrame({</span>
<span id="cb23-694"><a href="#cb23-694" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Parameter'</span>: [</span>
<span id="cb23-695"><a href="#cb23-695" aria-hidden="true" tabindex="-1"></a>        <span class="st">'VOT_Auto_Wrk'</span>, <span class="st">'VOT_Auto_Per'</span>, <span class="st">'VOT_Auto_Ext'</span>,</span>
<span id="cb23-696"><a href="#cb23-696" aria-hidden="true" tabindex="-1"></a>        <span class="st">'VOT_LT'</span>, <span class="st">'VOT_MD'</span>, <span class="st">'VOT_HV'</span>,</span>
<span id="cb23-697"><a href="#cb23-697" aria-hidden="true" tabindex="-1"></a>        <span class="st">'VOT_Auto_Wrk_Lo'</span>, <span class="st">'VOT_Auto_Per_Lo'</span>,</span>
<span id="cb23-698"><a href="#cb23-698" aria-hidden="true" tabindex="-1"></a>        <span class="st">'VOT_Auto_Wrk_Hi'</span>, <span class="st">'VOT_Auto_Per_Hi'</span></span>
<span id="cb23-699"><a href="#cb23-699" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb23-700"><a href="#cb23-700" aria-hidden="true" tabindex="-1"></a>    <span class="st">'VOT (cent/min)'</span>: [</span>
<span id="cb23-701"><a href="#cb23-701" aria-hidden="true" tabindex="-1"></a>        vot_cents_min.loc[<span class="st">'Average'</span>, <span class="st">'Work'</span>],</span>
<span id="cb23-702"><a href="#cb23-702" aria-hidden="true" tabindex="-1"></a>        vot_cents_min.loc[<span class="st">'Average'</span>, <span class="st">'Personal'</span>],</span>
<span id="cb23-703"><a href="#cb23-703" aria-hidden="true" tabindex="-1"></a>        (vot_cents_min.loc[<span class="st">'Average'</span>, <span class="st">'Work'</span>] <span class="op">+</span> vot_cents_min.loc[<span class="st">'Average'</span>, <span class="st">'Personal'</span>]) <span class="op">/</span> <span class="dv">2</span>,</span>
<span id="cb23-704"><a href="#cb23-704" aria-hidden="true" tabindex="-1"></a>        df_vot_trucks.loc[<span class="st">'Light'</span>, <span class="st">'VOT (¢/min)'</span>],</span>
<span id="cb23-705"><a href="#cb23-705" aria-hidden="true" tabindex="-1"></a>        df_vot_trucks.loc[<span class="st">'Medium'</span>, <span class="st">'VOT (¢/min)'</span>],</span>
<span id="cb23-706"><a href="#cb23-706" aria-hidden="true" tabindex="-1"></a>        df_vot_trucks.loc[<span class="st">'Heavy'</span>, <span class="st">'VOT (¢/min)'</span>],</span>
<span id="cb23-707"><a href="#cb23-707" aria-hidden="true" tabindex="-1"></a>        vot_cents_min.loc[<span class="st">'Low Inc'</span>, <span class="st">'Work'</span>],</span>
<span id="cb23-708"><a href="#cb23-708" aria-hidden="true" tabindex="-1"></a>        vot_cents_min.loc[<span class="st">'Low Inc'</span>, <span class="st">'Personal'</span>],</span>
<span id="cb23-709"><a href="#cb23-709" aria-hidden="true" tabindex="-1"></a>        vot_cents_min.loc[<span class="st">'High Inc'</span>, <span class="st">'Work'</span>],</span>
<span id="cb23-710"><a href="#cb23-710" aria-hidden="true" tabindex="-1"></a>        vot_cents_min.loc[<span class="st">'High Inc'</span>, <span class="st">'Personal'</span>]</span>
<span id="cb23-711"><a href="#cb23-711" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb23-712"><a href="#cb23-712" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb23-713"><a href="#cb23-713" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-714"><a href="#cb23-714" aria-hidden="true" tabindex="-1"></a>df_vot_params[<span class="st">'VOT ($/hr)'</span>] <span class="op">=</span> df_vot_params[<span class="st">'VOT (cent/min)'</span>] <span class="op">*</span> <span class="dv">60</span> <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb23-715"><a href="#cb23-715" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-716"><a href="#cb23-716" aria-hidden="true" tabindex="-1"></a>df_vot_params.style.<span class="bu">format</span>({</span>
<span id="cb23-717"><a href="#cb23-717" aria-hidden="true" tabindex="-1"></a>    <span class="st">'VOT (cent/min)'</span>: <span class="st">'</span><span class="sc">{:.0f}</span><span class="st">¢'</span>,</span>
<span id="cb23-718"><a href="#cb23-718" aria-hidden="true" tabindex="-1"></a>    <span class="st">'VOT ($/hr)'</span>: <span class="st">'$</span><span class="sc">{:.1f}</span><span class="st">'</span></span>
<span id="cb23-719"><a href="#cb23-719" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb23-720"><a href="#cb23-720" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-721"><a href="#cb23-721" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-722"><a href="#cb23-722" aria-hidden="true" tabindex="-1"></a><span class="fu">### Export to CSV</span></span>
<span id="cb23-723"><a href="#cb23-723" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-724"><a href="#cb23-724" aria-hidden="true" tabindex="-1"></a>We export the final VOT parameters to a CSV file for easy integration into the travel demand model configuration. This file becomes the authoritative source for VOT parameters, documenting the values used in model runs and providing traceability back to the source data and methodology.</span>
<span id="cb23-725"><a href="#cb23-725" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-728"><a href="#cb23-728" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-729"><a href="#cb23-729" aria-hidden="true" tabindex="-1"></a><span class="co"># Create output directory if it doesn't exist</span></span>
<span id="cb23-730"><a href="#cb23-730" aria-hidden="true" tabindex="-1"></a>output_dir <span class="op">=</span> Path(<span class="st">"_output"</span>)</span>
<span id="cb23-731"><a href="#cb23-731" aria-hidden="true" tabindex="-1"></a>output_dir.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb23-732"><a href="#cb23-732" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-733"><a href="#cb23-733" aria-hidden="true" tabindex="-1"></a><span class="co"># Export to CSV</span></span>
<span id="cb23-734"><a href="#cb23-734" aria-hidden="true" tabindex="-1"></a>df_vot_params.to_csv(</span>
<span id="cb23-735"><a href="#cb23-735" aria-hidden="true" tabindex="-1"></a>    output_dir <span class="op">/</span> <span class="st">"value_of_time.csv"</span>,</span>
<span id="cb23-736"><a href="#cb23-736" aria-hidden="true" tabindex="-1"></a>    index<span class="op">=</span><span class="va">False</span></span>
<span id="cb23-737"><a href="#cb23-737" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-738"><a href="#cb23-738" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-739"><a href="#cb23-739" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-740"><a href="#cb23-740" aria-hidden="true" tabindex="-1"></a>The exported file can be version-controlled alongside the model, ensuring that any changes to VOT assumptions are tracked and documented. When updating the model to new base years or recalibrating with new income data, this notebook can be re-run to generate updated VOT parameters consistently.</span>
<span id="cb23-741"><a href="#cb23-741" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-742"><a href="#cb23-742" aria-hidden="true" tabindex="-1"></a>::: {.callout-tip title="Download the output files:"}</span>
<span id="cb23-743"><a href="#cb23-743" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">value_of_time.csv</span><span class="co">](./_output/value_of_time.csv)</span></span>
<span id="cb23-744"><a href="#cb23-744" aria-hidden="true" tabindex="-1"></a>:::</span>
</code></pre></div><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>